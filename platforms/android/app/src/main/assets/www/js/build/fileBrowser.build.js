"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkcom_foxdebug_acode"] = self["webpackChunkcom_foxdebug_acode"] || []).push([["fileBrowser"],{

/***/ "./src/lib/remoteStorage.js":
/*!**********************************!*\
  !*** ./src/lib/remoteStorage.js ***!
  \**********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/toConsumableArray */ \"./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _utils_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/helpers */ \"./src/utils/helpers.js\");\n/* harmony import */ var _components_dialogs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/dialogs */ \"./src/components/dialogs.js\");\n/* harmony import */ var _utils_Url__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/Url */ \"./src/utils/Url.js\");\n/* harmony import */ var _fileSystem_sftp__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../fileSystem/sftp */ \"./src/fileSystem/sftp.js\");\n/* harmony import */ var _fileSystem_ftp__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../fileSystem/ftp */ \"./src/fileSystem/ftp.js\");\n/* harmony import */ var _fileSystem_fsOperation__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../fileSystem/fsOperation */ \"./src/fileSystem/fsOperation.js\");\n/* harmony import */ var url_parse__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! url-parse */ \"./node_modules/url-parse/index.js\");\n/* harmony import */ var url_parse__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(url_parse__WEBPACK_IMPORTED_MODULE_9__);\n\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  /**\n   *\n   * @param  {...any} args [username, password, hostname, port, ftps, active, name]\n   */\n  addFtp: function addFtp() {\n    var _arguments = arguments,\n        _this = this;\n\n    return (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark(function _callee() {\n      var stopConnection, _yield$prompt, username, password, hostname, port, ftps, active, alias, security, mode, ftp, home, url, res, prompt;\n\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              prompt = function _prompt(username, password, hostname, alias, port, security, mode) {\n                port = port || 21;\n                security = security || 'ftp';\n                mode = mode || 'passive';\n                return _components_dialogs__WEBPACK_IMPORTED_MODULE_4__[\"default\"].multiPrompt(strings['add ftp'], [{\n                  id: 'alias',\n                  placeholder: 'Name',\n                  type: 'text',\n                  value: alias ? alias : '',\n                  required: true\n                }, {\n                  id: 'username',\n                  placeholder: 'Username (optional)',\n                  type: 'text',\n                  value: username\n                }, {\n                  id: 'hostname',\n                  placeholder: 'Hostname',\n                  type: 'text',\n                  required: true,\n                  value: hostname\n                }, {\n                  id: 'password',\n                  placeholder: 'Password (optional)',\n                  type: 'password',\n                  value: password\n                }, ['Security type: ', {\n                  id: 'ftp',\n                  placeholder: 'FTP',\n                  name: 'type',\n                  type: 'radio',\n                  value: security === 'ftp' ? true : false\n                }, {\n                  id: 'ftps',\n                  placeholder: 'FTPS',\n                  name: 'type',\n                  type: 'radio',\n                  value: security === 'ftps' ? true : false\n                }], ['Connection mode: ', {\n                  id: 'active',\n                  placeholder: 'Active',\n                  name: 'mode',\n                  type: 'radio',\n                  value: mode === 'active' ? true : false\n                }, {\n                  id: 'passive',\n                  placeholder: 'Passive',\n                  name: 'mode',\n                  type: 'radio',\n                  value: mode === 'passive' ? true : false\n                }], {\n                  id: 'port',\n                  placeholder: 'Port (optional)',\n                  type: 'number',\n                  value: port\n                }]);\n              };\n\n              stopConnection = false;\n              _context.next = 4;\n              return prompt.apply(void 0, (0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_arguments));\n\n            case 4:\n              _yield$prompt = _context.sent;\n              username = _yield$prompt.username;\n              password = _yield$prompt.password;\n              hostname = _yield$prompt.hostname;\n              port = _yield$prompt.port;\n              ftps = _yield$prompt.ftps;\n              active = _yield$prompt.active;\n              alias = _yield$prompt.alias;\n              security = ftps ? 'ftps' : 'ftp';\n              mode = active ? 'active' : 'passive';\n              ftp = (0,_fileSystem_ftp__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(hostname, username, password, port, security, mode);\n              _context.prev = 15;\n              _components_dialogs__WEBPACK_IMPORTED_MODULE_4__[\"default\"].loader.create(strings['add ftp'], strings.connecting + '...', {\n                timeout: 10000,\n                callback: function callback() {\n                  stopConnection = true;\n                }\n              });\n              _context.next = 19;\n              return ftp.getWorkingDirectory();\n\n            case 19:\n              home = _context.sent;\n\n              if (!stopConnection) {\n                _context.next = 23;\n                break;\n              }\n\n              stopConnection = false;\n              return _context.abrupt(\"return\");\n\n            case 23:\n              url = _utils_Url__WEBPACK_IMPORTED_MODULE_5__[\"default\"].formate({\n                protocol: 'ftp:',\n                username: username,\n                password: password,\n                hostname: hostname,\n                port: port,\n                path: '/',\n                query: {\n                  mode: mode,\n                  security: security\n                }\n              });\n              res = {\n                url: url,\n                alias: alias,\n                name: alias,\n                type: 'ftp',\n                home: null\n              };\n\n              if (home !== '/') {\n                res.home = home;\n              }\n\n              _components_dialogs__WEBPACK_IMPORTED_MODULE_4__[\"default\"].loader.destroy();\n              return _context.abrupt(\"return\", res);\n\n            case 30:\n              _context.prev = 30;\n              _context.t0 = _context[\"catch\"](15);\n\n              if (!stopConnection) {\n                _context.next = 35;\n                break;\n              }\n\n              stopConnection = false;\n              return _context.abrupt(\"return\");\n\n            case 35:\n              _components_dialogs__WEBPACK_IMPORTED_MODULE_4__[\"default\"].loader.destroy();\n              _context.next = 38;\n              return _utils_helpers__WEBPACK_IMPORTED_MODULE_3__[\"default\"].error(_context.t0);\n\n            case 38:\n              _context.next = 40;\n              return _this.addFtp(username, password, hostname, alias, port, security, mode);\n\n            case 40:\n              return _context.abrupt(\"return\", _context.sent);\n\n            case 41:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[15, 30]]);\n    }))();\n  },\n\n  /**\n   * @param {...any} args [hostname, username, keyFile, password, passphrase, port, name]\n   */\n  addSftp: function addSftp() {\n    var _arguments2 = arguments,\n        _this2 = this;\n\n    return (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark(function _callee2() {\n      var stopConnection, _yield$prompt2, hostname, username, keyFile, password, passPhrase, port, alias, usePassword, authType, connection, home, localKeyFile, fs, rawData, text, filename, exists, _fs, url, prompt;\n\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              prompt = function _prompt2(hostname, username, keyFile, password, passPhrase, port, alias) {\n                var authType = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : 'password';\n                port = port || 22;\n                var MODE_PASS = authType === 'password';\n                var inputs = [{\n                  id: 'alias',\n                  placeholder: 'Name',\n                  type: 'text',\n                  value: alias ? alias : '',\n                  required: true\n                }, {\n                  id: 'username',\n                  placeholder: 'Username (optional)',\n                  type: 'text',\n                  value: username\n                }, {\n                  id: 'hostname',\n                  placeholder: 'Hostname',\n                  type: 'text',\n                  required: true,\n                  value: hostname\n                }, ['Authentication type: ', {\n                  id: 'usePassword',\n                  placeholder: 'Password',\n                  name: 'authType',\n                  type: 'radio',\n                  value: MODE_PASS,\n                  onchange: function onchange() {\n                    if (!!this.value) {\n                      this.prompt.$body.get('#password').hidden = false;\n                      this.prompt.$body.get('#keyFile').hidden = true;\n                      this.prompt.$body.get('#passPhrase').hidden = true;\n                    }\n                  }\n                }, {\n                  id: 'useKeyFile',\n                  placeholder: 'Key file',\n                  name: 'authType',\n                  type: 'radio',\n                  value: !MODE_PASS,\n                  onchange: function onchange() {\n                    if (!!this.value) {\n                      var $password = this.prompt.$body.get('#password');\n                      $password.hidden = true;\n                      $password.value = '';\n                      this.prompt.$body.get('#keyFile').hidden = false;\n                      this.prompt.$body.get('#passPhrase').hidden = false;\n                    }\n                  }\n                }], {\n                  id: 'password',\n                  placeholder: 'Password',\n                  name: 'password',\n                  type: 'password',\n                  value: password,\n                  hidden: !MODE_PASS\n                }, {\n                  id: 'keyFile',\n                  placeholder: 'Select key file',\n                  name: 'keyFile',\n                  hidden: MODE_PASS,\n                  value: keyFile,\n                  type: 'text',\n                  onclick: function onclick() {\n                    var _this3 = this;\n\n                    sdcard.openDocumentFile(function (res) {\n                      _this3.value = res.uri;\n                    });\n                  }\n                }, {\n                  id: 'passPhrase',\n                  placeholder: 'Passphrase (optional)',\n                  name: 'passPhrase',\n                  type: 'password',\n                  hidden: MODE_PASS,\n                  value: passPhrase\n                }, {\n                  id: 'port',\n                  placeholder: 'Port (optional)',\n                  type: 'number',\n                  value: port\n                }];\n                return _components_dialogs__WEBPACK_IMPORTED_MODULE_4__[\"default\"].multiPrompt(strings['add sftp'], inputs);\n              };\n\n              stopConnection = false;\n              _context2.next = 4;\n              return prompt.apply(void 0, (0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_arguments2));\n\n            case 4:\n              _yield$prompt2 = _context2.sent;\n              hostname = _yield$prompt2.hostname;\n              username = _yield$prompt2.username;\n              keyFile = _yield$prompt2.keyFile;\n              password = _yield$prompt2.password;\n              passPhrase = _yield$prompt2.passPhrase;\n              port = _yield$prompt2.port;\n              alias = _yield$prompt2.alias;\n              usePassword = _yield$prompt2.usePassword;\n              authType = usePassword ? 'password' : 'keyFile';\n              _components_dialogs__WEBPACK_IMPORTED_MODULE_4__[\"default\"].loader.create(strings['add sftp'], strings.connecting + '...', {\n                timeout: 10000,\n                callback: function callback() {\n                  stopConnection = true;\n                }\n              });\n              connection = (0,_fileSystem_sftp__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(hostname, parseInt(port), username, {\n                password: password,\n                keyFile: keyFile,\n                passPhrase: passPhrase\n              });\n              _context2.prev = 16;\n              _context2.next = 19;\n              return connection.pwd();\n\n            case 19:\n              home = _context2.sent;\n\n              if (!stopConnection) {\n                _context2.next = 23;\n                break;\n              }\n\n              stopConnection = false;\n              return _context2.abrupt(\"return\");\n\n            case 23:\n              localKeyFile = '';\n\n              if (!keyFile) {\n                _context2.next = 44;\n                break;\n              }\n\n              fs = (0,_fileSystem_fsOperation__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(keyFile);\n              _context2.next = 28;\n              return fs.readFile();\n\n            case 28:\n              rawData = _context2.sent;\n              text = new TextDecoder('utf-8').decode(new Uint8Array(rawData)); //Original key file sometimes gives permission error\n              //To solve permission error\n\n              filename = keyFile.hashCode();\n              localKeyFile = _utils_Url__WEBPACK_IMPORTED_MODULE_5__[\"default\"].join(DATA_STORAGE, filename);\n              fs = (0,_fileSystem_fsOperation__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(localKeyFile);\n              _context2.next = 35;\n              return fs.exists();\n\n            case 35:\n              exists = _context2.sent;\n\n              if (!exists) {\n                _context2.next = 41;\n                break;\n              }\n\n              _context2.next = 39;\n              return fs.writeFile(text);\n\n            case 39:\n              _context2.next = 44;\n              break;\n\n            case 41:\n              _fs = (0,_fileSystem_fsOperation__WEBPACK_IMPORTED_MODULE_8__[\"default\"])(DATA_STORAGE);\n              _context2.next = 44;\n              return _fs.createFile(filename, text);\n\n            case 44:\n              url = _utils_Url__WEBPACK_IMPORTED_MODULE_5__[\"default\"].formate({\n                protocol: 'sftp:',\n                hostname: hostname,\n                username: username,\n                password: password,\n                port: port,\n                path: '/',\n                query: {\n                  keyFile: localKeyFile,\n                  passPhrase: passPhrase\n                }\n              });\n              _components_dialogs__WEBPACK_IMPORTED_MODULE_4__[\"default\"].loader.destroy();\n              return _context2.abrupt(\"return\", {\n                alias: alias,\n                name: alias,\n                url: url,\n                type: 'sftp',\n                home: home\n              });\n\n            case 49:\n              _context2.prev = 49;\n              _context2.t0 = _context2[\"catch\"](16);\n\n              if (!stopConnection) {\n                _context2.next = 54;\n                break;\n              }\n\n              stopConnection = false;\n              return _context2.abrupt(\"return\");\n\n            case 54:\n              _components_dialogs__WEBPACK_IMPORTED_MODULE_4__[\"default\"].loader.destroy();\n              _context2.next = 57;\n              return _utils_helpers__WEBPACK_IMPORTED_MODULE_3__[\"default\"].error(_context2.t0);\n\n            case 57:\n              _context2.next = 59;\n              return _this2.addSftp(hostname, username, keyFile, password, passPhrase, port, alias, authType);\n\n            case 59:\n              return _context2.abrupt(\"return\", _context2.sent);\n\n            case 60:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[16, 49]]);\n    }))();\n  },\n  edit: function edit(_ref) {\n    var name = _ref.name,\n        storageType = _ref.storageType,\n        url = _ref.url;\n\n    var _URLParse = url_parse__WEBPACK_IMPORTED_MODULE_9___default()(url, true),\n        username = _URLParse.username,\n        password = _URLParse.password,\n        hostname = _URLParse.hostname,\n        port = _URLParse.port,\n        query = _URLParse.query;\n\n    if (username) {\n      username = decodeURIComponent(username);\n    }\n\n    if (password) {\n      password = decodeURIComponent(password);\n    }\n\n    if (storageType === 'ftp') {\n      var security = query.security,\n          mode = query.mode;\n\n      if (security) {\n        security = decodeURIComponent(security);\n      }\n\n      if (mode) {\n        mode = decodeURIComponent(mode);\n      }\n\n      return this.addFtp(username, password, hostname, name, port, security, mode);\n    }\n\n    if (storageType === 'sftp') {\n      var passPhrase = query.passPhrase,\n          keyFile = query.keyFile;\n\n      if (passPhrase) {\n        passPhrase = decodeURIComponent(passPhrase);\n      }\n\n      if (keyFile) {\n        keyFile = decodeURIComponent(keyFile);\n      }\n\n      return this.addSftp(hostname, username, keyFile, password, passPhrase, port, name, password ? 'password' : 'key');\n    }\n\n    return null;\n  }\n});\n\n//# sourceURL=webpack://com.foxdebug.acode/./src/lib/remoteStorage.js?");

/***/ }),

/***/ "./src/pages/fileBrowser/fileBrowser.include.js":
/*!******************************************************!*\
  !*** ./src/pages/fileBrowser/fileBrowser.include.js ***!
  \******************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/esm/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/esm/defineProperty.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _fileBrowser_scss__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./fileBrowser.scss */ \"./src/pages/fileBrowser/fileBrowser.scss\");\n/* harmony import */ var html_tag_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! html-tag-js */ \"./node_modules/html-tag-js/dist/tag.js\");\n/* harmony import */ var html_tag_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(html_tag_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var mustache__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! mustache */ \"./node_modules/mustache/mustache.mjs\");\n/* harmony import */ var _components_page__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../components/page */ \"./src/components/page.js\");\n/* harmony import */ var _utils_helpers__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../utils/helpers */ \"./src/utils/helpers.js\");\n/* harmony import */ var _components_contextMenu__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../components/contextMenu */ \"./src/components/contextMenu.js\");\n/* harmony import */ var _components_dialogs__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../components/dialogs */ \"./src/components/dialogs.js\");\n/* harmony import */ var _lib_constants__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../lib/constants */ \"./src/lib/constants.js\");\n/* harmony import */ var _settings_filesSettings__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../settings/filesSettings */ \"./src/settings/filesSettings.js\");\n/* harmony import */ var _fileBrowser_hbs__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./fileBrowser.hbs */ \"./src/pages/fileBrowser/fileBrowser.hbs\");\n/* harmony import */ var _list_hbs__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./list.hbs */ \"./src/pages/fileBrowser/list.hbs\");\n/* harmony import */ var _add_menu_hbs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./add-menu.hbs */ \"./src/pages/fileBrowser/add-menu.hbs\");\n/* harmony import */ var _add_menu_home_hbs__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./add-menu-home.hbs */ \"./src/pages/fileBrowser/add-menu-home.hbs\");\n/* harmony import */ var _fileSystem_externalFs__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../fileSystem/externalFs */ \"./src/fileSystem/externalFs.js\");\n/* harmony import */ var _fileSystem_fsOperation__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../fileSystem/fsOperation */ \"./src/fileSystem/fsOperation.js\");\n/* harmony import */ var _components_searchbar__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../components/searchbar */ \"./src/components/searchbar.js\");\n/* harmony import */ var _projects__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./projects */ \"./src/pages/fileBrowser/projects.js\");\n/* harmony import */ var _utils_Url__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../utils/Url */ \"./src/utils/Url.js\");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./util */ \"./src/pages/fileBrowser/util.js\");\n/* harmony import */ var _lib_openFolder__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../lib/openFolder */ \"./src/lib/openFolder.js\");\n/* harmony import */ var _lib_recents__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../lib/recents */ \"./src/lib/recents.js\");\n/* harmony import */ var _lib_remoteStorage__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../lib/remoteStorage */ \"./src/lib/remoteStorage.js\");\n/* harmony import */ var url_parse__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! url-parse */ \"./node_modules/url-parse/index.js\");\n/* harmony import */ var url_parse__WEBPACK_IMPORTED_MODULE_26___default = /*#__PURE__*/__webpack_require__.n(url_parse__WEBPACK_IMPORTED_MODULE_26__);\n\n\n\n\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\r\n * @typedef {{url: String, name: String}} Location\r\n */\n\n/**\r\n * @typedef Storage\r\n * @property {String} name\r\n * @property {String} uuid\r\n * @property {String} url\r\n * @property {'dir'} type\r\n * @property {'permission'|'ftp'|'sftp'|'sd'} storageType\r\n */\n\n/**\r\n *\r\n * @param {import('./fileBrowser').BrowseMode} [mode='file']\r\n * @param {function(string):boolean} [buttonText] button text or function to check extension\r\n * @param {string} [info]\r\n * @param {boolean} [doesOpenLast]\r\n * @returns {Promise<import('./fileBrowser').SelectedFile>}\r\n */\n\nfunction FileBrowserInclude(mode, info, buttonText) {\n  var doesOpenLast = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n  mode = mode || 'file';\n  var IS_FOLDER_MODE = ['folder', 'both'].includes(mode);\n  var IS_FILE_MODE = ['file', 'both'].includes(mode);\n  var storedState = _utils_helpers__WEBPACK_IMPORTED_MODULE_8__[\"default\"].parseJSON(localStorage.fileBrowserState) || [];\n  /**@type {Array<Location>} */\n\n  var state = [];\n  /**@type {Array<Storage>} */\n\n  var allStorages = [];\n  var storageList = JSON.parse(localStorage.storageList || '[]');\n\n  if (!info) {\n    if (mode !== 'both') {\n      info = IS_FOLDER_MODE ? strings['open folder'] : strings['open file'];\n    } else {\n      info = strings['file browser'];\n    }\n  }\n\n  return new Promise(function (resolve, reject) {\n    //#region Declaration\n    var $menuToggler = html_tag_js__WEBPACK_IMPORTED_MODULE_5___default()('i', {\n      className: 'icon more_vert',\n      attr: {\n        action: 'toggle-menu'\n      }\n    });\n    var $addMenuToggler = html_tag_js__WEBPACK_IMPORTED_MODULE_5___default()('i', {\n      className: 'icon add',\n      attr: {\n        action: 'toggle-add-menu'\n      }\n    });\n    var $search = html_tag_js__WEBPACK_IMPORTED_MODULE_5___default()('i', {\n      className: 'icon search',\n      attr: {\n        action: 'search'\n      }\n    });\n    var $lead = html_tag_js__WEBPACK_IMPORTED_MODULE_5___default()('span', {\n      className: 'icon clearclose',\n      attr: {\n        action: 'close'\n      }\n    });\n    var $page = (0,_components_page__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(strings['file browser'].capitalize(), {\n      lead: $lead\n    });\n    var $content = html_tag_js__WEBPACK_IMPORTED_MODULE_5___default().parse(mustache__WEBPACK_IMPORTED_MODULE_6__[\"default\"].render(_fileBrowser_hbs__WEBPACK_IMPORTED_MODULE_13__[\"default\"], {\n      type: mode,\n      info: info\n    }));\n    var $navigation = $content.get('.navigation');\n    var menuOption = {\n      top: '8px',\n      right: '8px',\n      toggle: $menuToggler,\n      transformOrigin: 'top right'\n    };\n    var $fbMenu = (0,_components_contextMenu__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(_objectSpread({\n      innerHTML: function innerHTML() {\n        return \"\\n        <li action=\\\"settings\\\">\".concat(strings.settings.capitalize(0), \"</li>\\n        \").concat(currentDir.url === '/' ? \"<li action=\\\"refresh\\\">\".concat(strings['reset connections'].capitalize(0), \"</li>\") : '', \"\\n        <li action=\\\"reload\\\">\").concat(strings.reload.capitalize(0), \"</li>\\n        \");\n      }\n    }, menuOption));\n    var $addMenu = (0,_components_contextMenu__WEBPACK_IMPORTED_MODULE_9__[\"default\"])(_objectSpread({\n      innerHTML: function innerHTML() {\n        if (currentDir.url === '/') {\n          var addSftpNotice = !localStorage.__fbAddSftp;\n          var addPathNotice = !localStorage.__fbAddPath;\n          return mustache__WEBPACK_IMPORTED_MODULE_6__[\"default\"].render(_add_menu_home_hbs__WEBPACK_IMPORTED_MODULE_16__[\"default\"], _objectSpread({\n            addPathNotice: addPathNotice,\n            addSftpNotice: addSftpNotice\n          }, strings));\n        } else {\n          return mustache__WEBPACK_IMPORTED_MODULE_6__[\"default\"].render(_add_menu_hbs__WEBPACK_IMPORTED_MODULE_15__[\"default\"], strings);\n        }\n      }\n    }, (menuOption.toggle = $addMenuToggler) && menuOption));\n    var progress = {};\n    var cachedDir = {};\n    var currentDir = {\n      url: null,\n      name: null,\n      list: [],\n      scroll: 0\n    };\n    /**\r\n     * @type {HTMLButtonElement}\r\n     */\n\n    var $openFolder; //#endregion\n\n    actionStack.setMark();\n    $lead.onclick = $page.hide;\n    $content.addEventListener('click', handleClick);\n    $content.addEventListener('contextmenu', handleContextMenu);\n    $page.body = $content;\n    $page.header.append($search, $addMenuToggler, $menuToggler);\n\n    if (IS_FOLDER_MODE) {\n      $openFolder = html_tag_js__WEBPACK_IMPORTED_MODULE_5___default()('button', {\n        className: 'floating icon check',\n        style: {\n          bottom: '10px',\n          top: 'auto'\n        },\n        disabled: true,\n        onclick: function onclick() {\n          $page.hide();\n          resolve(_objectSpread({\n            type: 'folder'\n          }, currentDir));\n        }\n      });\n      $page.append($openFolder);\n    }\n\n    app.append($page);\n    _utils_helpers__WEBPACK_IMPORTED_MODULE_8__[\"default\"].showAd();\n    actionStack.push({\n      id: 'filebrowser',\n      action: function action() {\n        var err = new Error('User cancelled');\n        Object.defineProperty(err, 'code', {\n          value: 0\n        });\n        reject(err);\n        $page.hide();\n      }\n    });\n\n    $fbMenu.onclick = function (e) {\n      $fbMenu.hide();\n      var action = e.target.getAttribute('action');\n\n      if (action === 'settings') {\n        (0,_settings_filesSettings__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(reload);\n        return;\n      }\n\n      if (action === 'reload') {\n        var _currentDir = currentDir,\n            url = _currentDir.url;\n        if (url in cachedDir) delete cachedDir[url];\n        reload();\n        return;\n      }\n\n      if (action === 'refresh') {\n        ftp.disconnect(function () {}, function () {});\n        sftp.close(function () {}, function () {});\n        toast(strings.success);\n        return;\n      }\n\n      checkAndSetNotification();\n    };\n\n    $addMenu.onclick = function (e) {\n      $addMenu.hide();\n      var $target = e.target;\n      var action = $target.getAttribute('action');\n      var value = $target.getAttribute('value');\n      if (!action) return;\n\n      switch (action) {\n        case 'create':\n          create(value);\n          break;\n\n        case 'add-path':\n          localStorage.__fbAddPath = true;\n          addStorage();\n          break;\n\n        case 'addFtp':\n        case 'addSftp':\n          if (action === 'addSftp') {\n            localStorage.__fbAddSftp = true;\n          }\n\n          _lib_remoteStorage__WEBPACK_IMPORTED_MODULE_25__[\"default\"][action]().then(function (storage) {\n            updateStorage(storage);\n          }).catch(function (err) {\n            if (err) console.error(err);\n          });\n          break;\n\n        default:\n          break;\n      }\n\n      checkAndSetNotification();\n    };\n\n    $search.onclick = function () {\n      var $list = $content.get('#list');\n      if ($list) (0,_components_searchbar__WEBPACK_IMPORTED_MODULE_19__[\"default\"])($list);\n    };\n\n    $page.onhide = function () {\n      _utils_helpers__WEBPACK_IMPORTED_MODULE_8__[\"default\"].hideAd();\n      actionStack.clearFromMark();\n      actionStack.remove('filebrowser');\n      $content.removeEventListener('click', handleClick);\n      $content.removeEventListener('contextmenu', handleContextMenu);\n      document.removeEventListener('resume', reload);\n    };\n\n    if (doesOpenLast && storedState.length) {\n      loadStates(storedState);\n      return;\n    }\n\n    navigate('/', '/');\n    /**\r\n     * Called when any file folder is clicked\r\n     * @param {MouseEvent} e\r\n     * @param {\"contextmenu\"} [isContextMenu]\r\n     */\n\n    function handleClick(e, isContextMenu) {\n      /**\r\n       * @type {HTMLElement}\r\n       */\n      var $el = e.target;\n      var action = $el.getAttribute('action');\n      if (!action) return;\n      var url = $el.data_url;\n      var name = $el.data_name || $el.getAttribute('name');\n      var opendoc = $el.hasAttribute('open-doc');\n      var uuid = $el.getAttribute('uuid');\n      var type = $el.getAttribute('type');\n      var storageType = $el.getAttribute('storageType');\n      var home = $el.getAttribute('home');\n      var isDir = ['dir', 'directory', 'folder'].includes(type);\n\n      if (!url) {\n        var $url = $el.get('data-url');\n\n        if ($url) {\n          url = $url.textContent;\n        }\n      }\n\n      if (storageType === 'notification') {\n        switch (uuid) {\n          case 'addstorage':\n            addStorage();\n            break;\n\n          default:\n            break;\n        }\n\n        return;\n      }\n\n      if (!url && action === 'open' && isDir && !opendoc && !isContextMenu) {\n        _components_dialogs__WEBPACK_IMPORTED_MODULE_10__[\"default\"].loader.hide();\n        _util__WEBPACK_IMPORTED_MODULE_22__[\"default\"].addPath(name, uuid).then(function (res) {\n          var storage = allStorages.find(function (storage) {\n            return storage.uuid === uuid;\n          });\n          storage.url = res.uri;\n          storage.name = res.name;\n          name = res.name;\n          updateStorage(storage, false);\n          url = res.uri;\n          folder();\n        });\n        return;\n      }\n\n      if (opendoc) action = 'open-doc';\n      if (isContextMenu) action = 'contextmenu';\n\n      switch (action) {\n        case 'navigation':\n          folder();\n          break;\n\n        case 'contextmenu':\n          cmhandler();\n          break;\n\n        case 'open':\n          if (isDir) folder();else if (!$el.hasAttribute('disabled')) file();\n          break;\n\n        case 'open-doc':\n          openDoc();\n          break;\n      }\n\n      function folder() {\n        if (home) {\n          navigateToHome();\n          return;\n        }\n\n        navigate(url, name);\n      }\n\n      function navigateToHome() {\n        var navigations = [];\n        var dirs = home.split('/');\n\n        var _Url$parse = _utils_Url__WEBPACK_IMPORTED_MODULE_21__[\"default\"].parse(url),\n            parsedUrl = _Url$parse.url,\n            query = _Url$parse.query;\n\n        var path = '';\n\n        var _iterator = _createForOfIteratorHelper(dirs),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var dir = _step.value;\n            path = _utils_Url__WEBPACK_IMPORTED_MODULE_21__[\"default\"].join(path, dir);\n            navigations.push({\n              url: \"\".concat(_utils_Url__WEBPACK_IMPORTED_MODULE_21__[\"default\"].join(parsedUrl, path, '')).concat(query),\n              name: dir || name\n            });\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n\n        loadStates(navigations);\n      }\n\n      function file() {\n        $page.hide();\n        resolve({\n          type: 'file',\n          url: url,\n          name: name\n        });\n      }\n\n      function cmhandler() {\n        if (appSettings.value.vibrateOnTap) {\n          navigator.vibrate(_lib_constants__WEBPACK_IMPORTED_MODULE_11__[\"default\"].VIBRATION_TIME);\n        }\n\n        if ($el.getAttribute('open-doc') === 'true') return;\n        var options = [['delete', strings.delete, 'delete'], ['rename', strings.rename, 'text_format']];\n\n        if (/s?ftp/.test(storageType)) {\n          options.push(['edit', strings.edit, 'edit']);\n        }\n\n        if (_utils_helpers__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isFile(type)) {\n          options.push(['info', strings.info, 'info']);\n        }\n\n        _components_dialogs__WEBPACK_IMPORTED_MODULE_10__[\"default\"].select('', options).then(function (res) {\n          switch (res) {\n            case 'delete':\n              _components_dialogs__WEBPACK_IMPORTED_MODULE_10__[\"default\"].confirm(strings.warning.toUpperCase(), strings['delete {name}'].replace('{name}', name)).then(remove);\n              break;\n\n            case 'rename':\n              _components_dialogs__WEBPACK_IMPORTED_MODULE_10__[\"default\"].prompt(strings.rename, name, 'text', {\n                match: _lib_constants__WEBPACK_IMPORTED_MODULE_11__[\"default\"].FILE_NAME_REGEX\n              }).then(function (newname) {\n                rename(newname);\n              });\n              break;\n\n            case 'edit':\n              _lib_remoteStorage__WEBPACK_IMPORTED_MODULE_25__[\"default\"].edit(storageList.find(function (storage) {\n                return storage.uuid === uuid;\n              })).then(function (storage) {\n                if (storage) {\n                  storage.uuid = uuid;\n                  updateStorage(storage);\n                }\n              }).catch(function (err) {\n                if (err) console.error(err);\n              });\n              break;\n\n            case 'info':\n              acode.exec('file-info', url);\n              break;\n          }\n        });\n      }\n\n      function rename(newname) {\n        if (uuid) {\n          renameStorage(newname);\n        } else {\n          renameFile(newname);\n        }\n      }\n\n      function remove() {\n        if (uuid) {\n          removeStorage();\n        } else {\n          removeFile();\n        }\n      }\n\n      function renameFile(_x) {\n        return _renameFile.apply(this, arguments);\n      }\n\n      function _renameFile() {\n        _renameFile = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee(newname) {\n          var fs, newUrl;\n          return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  fs = (0,_fileSystem_fsOperation__WEBPACK_IMPORTED_MODULE_18__[\"default\"])(url);\n                  _context.prev = 1;\n                  _context.next = 4;\n                  return fs.renameTo(newname);\n\n                case 4:\n                  newUrl = _context.sent;\n                  _lib_openFolder__WEBPACK_IMPORTED_MODULE_23__[\"default\"].updateItem(url, newUrl, newname);\n                  toast(strings.success);\n                  reload();\n                  _context.next = 13;\n                  break;\n\n                case 10:\n                  _context.prev = 10;\n                  _context.t0 = _context[\"catch\"](1);\n                  _utils_helpers__WEBPACK_IMPORTED_MODULE_8__[\"default\"].error(_context.t0);\n\n                case 13:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, null, [[1, 10]]);\n        }));\n        return _renameFile.apply(this, arguments);\n      }\n\n      function removeFile() {\n        return _removeFile.apply(this, arguments);\n      }\n\n      function _removeFile() {\n        _removeFile = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee2() {\n          var fs, openedFile;\n          return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _context2.prev = 0;\n                  fs = (0,_fileSystem_fsOperation__WEBPACK_IMPORTED_MODULE_18__[\"default\"])(url);\n                  _context2.next = 4;\n                  return fs.delete();\n\n                case 4:\n                  _lib_recents__WEBPACK_IMPORTED_MODULE_24__[\"default\"].removeFile(url);\n\n                  if (_utils_helpers__WEBPACK_IMPORTED_MODULE_8__[\"default\"].isDir(type)) {\n                    _utils_helpers__WEBPACK_IMPORTED_MODULE_8__[\"default\"].updateUriOfAllActiveFiles(url);\n                    _lib_recents__WEBPACK_IMPORTED_MODULE_24__[\"default\"].removeFolder(url);\n                    _lib_openFolder__WEBPACK_IMPORTED_MODULE_23__[\"default\"].removeItem(url);\n                    _lib_openFolder__WEBPACK_IMPORTED_MODULE_23__[\"default\"].removeFolders(url);\n                  } else {\n                    openedFile = editorManager.getFile(url, 'uri');\n                    if (openedFile) openedFile.uri = null;\n                  }\n\n                  delete cachedDir[url];\n                  reload();\n                  toast(strings.success);\n                  _context2.next = 14;\n                  break;\n\n                case 11:\n                  _context2.prev = 11;\n                  _context2.t0 = _context2[\"catch\"](0);\n                  _utils_helpers__WEBPACK_IMPORTED_MODULE_8__[\"default\"].error(_context2.t0);\n\n                case 14:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2, null, [[0, 11]]);\n        }));\n        return _removeFile.apply(this, arguments);\n      }\n\n      function removeStorage() {\n        if (url) {\n          _lib_recents__WEBPACK_IMPORTED_MODULE_24__[\"default\"].removeFolder(url);\n          _lib_recents__WEBPACK_IMPORTED_MODULE_24__[\"default\"].removeFile(url);\n        }\n\n        storageList = storageList.filter(function (storage) {\n          if (storage.uuid !== uuid) {\n            return true;\n          }\n\n          if (storage.url) {\n            var parsedUrl = url_parse__WEBPACK_IMPORTED_MODULE_26___default()(storage.url, true);\n            var keyFile = decodeURIComponent(parsedUrl.query['keyFile'] || '');\n\n            if (keyFile) {\n              (0,_fileSystem_fsOperation__WEBPACK_IMPORTED_MODULE_18__[\"default\"])(keyFile).delete();\n            }\n          }\n\n          return false;\n        });\n        localStorage.storageList = JSON.stringify(storageList);\n        reload();\n      }\n\n      function renameStorage(newname) {\n        storageList = storageList.map(function (storage) {\n          if (storage.uuid === uuid) storage.name = newname;\n          return storage;\n        });\n        localStorage.storageList = JSON.stringify(storageList);\n        reload();\n      }\n\n      function openDoc() {\n        sdcard.openDocumentFile(function (res) {\n          res.url = res.uri;\n          resolve(_objectSpread(_objectSpread({\n            type: 'file'\n          }, res), {}, {\n            name: res.filename,\n            mode: 'single'\n          }));\n          $page.hide();\n        }, function (err) {\n          _utils_helpers__WEBPACK_IMPORTED_MODULE_8__[\"default\"].error(err);\n        });\n      }\n    }\n\n    function handleContextMenu(e) {\n      handleClick(e, true);\n    }\n\n    function checkAndSetNotification() {\n      var addButtonNotice = !localStorage.__fbAddPath || !localStorage.__fbAddSftp;\n\n      if (addButtonNotice) {\n        $addMenuToggler.classList.add('notice');\n      } else {\n        $addMenuToggler.classList.remove('notice');\n      }\n    }\n\n    function listAllStorages() {\n      return _listAllStorages.apply(this, arguments);\n    }\n    /**\r\n     * Gets directory for given url for rendering\r\n     * @param {String} url\r\n     * @param {String} name\r\n     * @returns {Promise<{name: String, url: String, list: [], scroll: Number}>}\r\n     */\n\n\n    function _listAllStorages() {\n      _listAllStorages = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee3() {\n        var hasInternalStorage, rootDirName, testDirName, testDirFs, res;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                hasInternalStorage = true;\n                allStorages.length = 0;\n\n                if (!(ANDROID_SDK_INT == 29)) {\n                  _context3.next = 24;\n                  break;\n                }\n\n                rootDirName = cordova.file.externalRootDirectory;\n                testDirName = 'Acode_Test_file' + _utils_helpers__WEBPACK_IMPORTED_MODULE_8__[\"default\"].uuid();\n                testDirFs = (0,_fileSystem_fsOperation__WEBPACK_IMPORTED_MODULE_18__[\"default\"])(_utils_Url__WEBPACK_IMPORTED_MODULE_21__[\"default\"].join(rootDirName, testDirName));\n                _context3.prev = 6;\n                _context3.next = 9;\n                return (0,_fileSystem_fsOperation__WEBPACK_IMPORTED_MODULE_18__[\"default\"])(rootDirName).createDirectory(testDirName);\n\n              case 9:\n                _context3.next = 11;\n                return testDirFs.createFile('test' + _utils_helpers__WEBPACK_IMPORTED_MODULE_8__[\"default\"].uuid());\n\n              case 11:\n                _context3.next = 13;\n                return testDirFs.lsDir();\n\n              case 13:\n                hasInternalStorage = !!_context3.sent.length;\n                _context3.next = 19;\n                break;\n\n              case 16:\n                _context3.prev = 16;\n                _context3.t0 = _context3[\"catch\"](6);\n                console.error(_context3.t0);\n\n              case 19:\n                _context3.prev = 19;\n                testDirFs.delete();\n                return _context3.finish(19);\n\n              case 22:\n                _context3.next = 25;\n                break;\n\n              case 24:\n                if (ANDROID_SDK_INT > 29) {\n                  hasInternalStorage = false;\n                }\n\n              case 25:\n                if (hasInternalStorage) {\n                  _util__WEBPACK_IMPORTED_MODULE_22__[\"default\"].pushFolder(allStorages, 'Internal storage', cordova.file.externalRootDirectory, {\n                    uuid: 'internal-storage'\n                  });\n                }\n\n                _context3.prev = 26;\n                _context3.next = 29;\n                return _fileSystem_externalFs__WEBPACK_IMPORTED_MODULE_17__[\"default\"].listStorages();\n\n              case 29:\n                res = _context3.sent;\n                res.forEach(function (storage) {\n                  if (storageList.find(function (s) {\n                    return s.uuid === storage.uuid;\n                  })) return;\n                  var path;\n\n                  if (storage.path && isStorageManager) {\n                    path = 'file://' + storage.path;\n                  }\n\n                  _util__WEBPACK_IMPORTED_MODULE_22__[\"default\"].pushFolder(allStorages, storage.name, path || '', _objectSpread(_objectSpread({}, storage), {}, {\n                    storageType: 'sd'\n                  }));\n                });\n                _context3.next = 35;\n                break;\n\n              case 33:\n                _context3.prev = 33;\n                _context3.t1 = _context3[\"catch\"](26);\n\n              case 35:\n                storageList.forEach(function (storage) {\n                  var url = storage.url ||\n                  /**@drepreceted */\n                  storage['uri'];\n                  _util__WEBPACK_IMPORTED_MODULE_22__[\"default\"].pushFolder(allStorages, storage.name, url, {\n                    storageType: storage.storageType,\n                    uuid: storage.uuid,\n                    home: storage.home\n                  });\n                });\n\n                if (!allStorages.length) {\n                  _util__WEBPACK_IMPORTED_MODULE_22__[\"default\"].pushFolder(allStorages, strings['add a storage'], '', {\n                    storageType: 'notification',\n                    uuid: 'addstorage'\n                  });\n                }\n\n                if (IS_FILE_MODE) {\n                  _util__WEBPACK_IMPORTED_MODULE_22__[\"default\"].pushFolder(allStorages, 'Select document', null, {\n                    'open-doc': true\n                  });\n                }\n\n                return _context3.abrupt(\"return\", allStorages);\n\n              case 39:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, null, [[6, 16, 19, 22], [26, 33]]);\n      }));\n      return _listAllStorages.apply(this, arguments);\n    }\n\n    function getDir(_x2, _x3) {\n      return _getDir.apply(this, arguments);\n    }\n    /**\r\n     * Navigates to specific directory\r\n     * @param {String} url\r\n     * @param {String} name\r\n     */\n\n\n    function _getDir() {\n      _getDir = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee4(url, name) {\n        var fileBrowser, list, error, id, timeout, fs;\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                fileBrowser = appSettings.value.fileBrowser;\n                list = null;\n                error = false;\n\n                if (!(url in cachedDir)) {\n                  _context4.next = 7;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", cachedDir[url]);\n\n              case 7:\n                if (!(url === '/')) {\n                  _context4.next = 13;\n                  break;\n                }\n\n                _context4.next = 10;\n                return listAllStorages();\n\n              case 10:\n                list = _context4.sent;\n                _context4.next = 30;\n                break;\n\n              case 13:\n                id = _utils_helpers__WEBPACK_IMPORTED_MODULE_8__[\"default\"].uuid();\n                progress[id] = true;\n                timeout = setTimeout(function () {\n                  _components_dialogs__WEBPACK_IMPORTED_MODULE_10__[\"default\"].loader.create(name, strings.loading + '...', {\n                    timeout: 10000,\n                    callback: function callback() {\n                      _components_dialogs__WEBPACK_IMPORTED_MODULE_10__[\"default\"].loader.destroy();\n                      navigate('/', '/');\n                      progress[id] = false;\n                    }\n                  });\n                }, 100);\n                fs = (0,_fileSystem_fsOperation__WEBPACK_IMPORTED_MODULE_18__[\"default\"])(url);\n                _context4.prev = 17;\n                _context4.next = 20;\n                return fs.lsDir();\n\n              case 20:\n                list = _context4.sent;\n                _context4.next = 26;\n                break;\n\n              case 23:\n                _context4.prev = 23;\n                _context4.t0 = _context4[\"catch\"](17);\n\n                if (progress[id]) {\n                  _utils_helpers__WEBPACK_IMPORTED_MODULE_8__[\"default\"].error(_context4.t0, url);\n                } else {\n                  console.error(_context4.t0);\n                }\n\n              case 26:\n                error = !progress[id];\n                delete progress[id];\n                clearTimeout(timeout);\n                _components_dialogs__WEBPACK_IMPORTED_MODULE_10__[\"default\"].loader.destroy();\n\n              case 30:\n                if (!error) {\n                  _context4.next = 32;\n                  break;\n                }\n\n                return _context4.abrupt(\"return\", null);\n\n              case 32:\n                return _context4.abrupt(\"return\", {\n                  url: url,\n                  name: name,\n                  scroll: 0,\n                  list: _utils_helpers__WEBPACK_IMPORTED_MODULE_8__[\"default\"].sortDir(list, fileBrowser, mode)\n                });\n\n              case 33:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, null, [[17, 23]]);\n      }));\n      return _getDir.apply(this, arguments);\n    }\n\n    function navigate(_x4, _x5) {\n      return _navigate.apply(this, arguments);\n    }\n    /**\r\n     * @param {\"file\"|\"folder\"|\"project\"} arg\r\n     */\n\n\n    function _navigate() {\n      _navigate = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee5(url, name) {\n        var assignBackButton,\n            $nav,\n            $topNav,\n            _url2,\n            location,\n            _dir,\n            dir,\n            _currentDir5,\n            curl,\n            cname,\n            action,\n            _args5 = arguments;\n\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                assignBackButton = _args5.length > 2 && _args5[2] !== undefined ? _args5[2] : true;\n\n                if (url) {\n                  _context5.next = 3;\n                  break;\n                }\n\n                throw new Error('navigate(url, name): \"url\" is required.');\n\n              case 3:\n                if (name) {\n                  _context5.next = 5;\n                  break;\n                }\n\n                throw new Error('navigate(url, name): \"name\" is required.');\n\n              case 5:\n                if (url === '/') {\n                  if (IS_FOLDER_MODE) $openFolder.disabled = true;\n                } else {\n                  if (IS_FOLDER_MODE) $openFolder.disabled = false;\n                }\n\n                $nav = html_tag_js__WEBPACK_IMPORTED_MODULE_5___default().get(\"#\".concat(getNavId(url))); //If navigate to previous directories, clear the rest navigation\n\n                if (!$nav) {\n                  _context5.next = 22;\n                  break;\n                }\n\n                while (($topNav = $navigation.lastChild) !== $nav) {\n                  _url2 = $topNav.data_url;\n                  actionStack.remove(_url2);\n                  $topNav.remove();\n                }\n\n              case 9:\n                if (false) {}\n\n                location = state.slice(-1)[0];\n\n                if (!(!location || location.url === url)) {\n                  _context5.next = 13;\n                  break;\n                }\n\n                return _context5.abrupt(\"break\", 16);\n\n              case 13:\n                state.pop();\n                _context5.next = 9;\n                break;\n\n              case 16:\n                localStorage.fileBrowserState = JSON.stringify(state);\n                _context5.next = 19;\n                return getDir(url, name);\n\n              case 19:\n                _dir = _context5.sent;\n\n                if (_dir) {\n                  render(_dir);\n                }\n\n                return _context5.abrupt(\"return\");\n\n              case 22:\n                _context5.next = 24;\n                return getDir(url, name);\n\n              case 24:\n                dir = _context5.sent;\n\n                if (dir) {\n                  _currentDir5 = currentDir, curl = _currentDir5.url, cname = _currentDir5.name;\n                  if (doesOpenLast) pushState({\n                    name: name,\n                    url: url\n                  });\n\n                  if (curl && cname && assignBackButton) {\n                    action = function action() {\n                      navigate(curl, cname, false);\n                    };\n                  }\n\n                  pushToNavbar(name, url, action);\n                  render(dir);\n                }\n\n              case 26:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n      return _navigate.apply(this, arguments);\n    }\n\n    function create(_x6) {\n      return _create.apply(this, arguments);\n    }\n    /**\r\n     *  Pushes a navigation button to navbar\r\n     * @param {String} id\r\n     * @param {String} name\r\n     * @param {String} url\r\n     */\n\n\n    function _create() {\n      _create = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee8(arg) {\n        var _currentDir6, url, alreadyCreated, options, cturl, newUrl, project, projectName, framework, title, val, entryName, fs, _fs, files, createProject, _createProject, createFile, createDir, _createDir;\n\n        return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _createDir = function _createDir3() {\n                  _createDir = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee7(project, fileurl, filename, paths) {\n                    var lclUrl, fs, data, name, toCreate;\n                    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee7$(_context7) {\n                      while (1) {\n                        switch (_context7.prev = _context7.next) {\n                          case 0:\n                            lclUrl = _utils_Url__WEBPACK_IMPORTED_MODULE_21__[\"default\"].join(newUrl, cturl);\n                            fs = (0,_fileSystem_fsOperation__WEBPACK_IMPORTED_MODULE_18__[\"default\"])(lclUrl);\n\n                            if (!(paths.length === 0)) {\n                              _context7.next = 7;\n                              break;\n                            }\n\n                            data = project[fileurl].replace(/<%name%>/g, projectName);\n                            _context7.next = 6;\n                            return fs.createFile(filename, data);\n\n                          case 6:\n                            return _context7.abrupt(\"return\");\n\n                          case 7:\n                            name = paths.splice(0, 1)[0];\n                            toCreate = _utils_Url__WEBPACK_IMPORTED_MODULE_21__[\"default\"].join(lclUrl, name);\n\n                            if (alreadyCreated.includes(toCreate)) {\n                              _context7.next = 13;\n                              break;\n                            }\n\n                            _context7.next = 12;\n                            return fs.createDirectory(name);\n\n                          case 12:\n                            alreadyCreated.push(toCreate);\n\n                          case 13:\n                            cturl += name + '/';\n                            _context7.next = 16;\n                            return createDir(project, fileurl, filename, paths);\n\n                          case 16:\n                            return _context7.abrupt(\"return\", _context7.sent);\n\n                          case 17:\n                          case \"end\":\n                            return _context7.stop();\n                        }\n                      }\n                    }, _callee7);\n                  }));\n                  return _createDir.apply(this, arguments);\n                };\n\n                createDir = function _createDir2(_x8, _x9, _x10, _x11) {\n                  return _createDir.apply(this, arguments);\n                };\n\n                createFile = function _createFile(fileurl) {\n                  var paths = fileurl.split('/');\n                  var filename = paths.pop();\n                  return createDir(project, fileurl, filename, paths);\n                };\n\n                _createProject = function _createProject3() {\n                  _createProject = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee6(files) {\n                    var file;\n                    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee6$(_context6) {\n                      while (1) {\n                        switch (_context6.prev = _context6.next) {\n                          case 0:\n                            if (files.length) {\n                              _context6.next = 4;\n                              break;\n                            }\n\n                            updateAddedFolder(url);\n                            reload();\n                            return _context6.abrupt(\"return\");\n\n                          case 4:\n                            cturl = '';\n                            file = files.pop();\n                            _context6.next = 8;\n                            return createFile(file);\n\n                          case 8:\n                            _context6.next = 10;\n                            return createProject(files);\n\n                          case 10:\n                            return _context6.abrupt(\"return\", _context6.sent);\n\n                          case 11:\n                          case \"end\":\n                            return _context6.stop();\n                        }\n                      }\n                    }, _callee6);\n                  }));\n                  return _createProject.apply(this, arguments);\n                };\n\n                createProject = function _createProject2(_x7) {\n                  return _createProject.apply(this, arguments);\n                };\n\n                _currentDir6 = currentDir, url = _currentDir6.url;\n                alreadyCreated = [];\n                options = [];\n                cturl = '';\n                newUrl = null;\n                project = '';\n                projectName = '';\n                framework = '';\n\n                if (!(arg === 'file' || arg === 'folder')) {\n                  _context8.next = 39;\n                  break;\n                }\n\n                title = strings['enter folder name'];\n                val = strings['new folder'];\n\n                if (arg === 'file') {\n                  title = strings['enter file name'];\n                  val = 'untitled.txt';\n                }\n\n                _context8.next = 19;\n                return _components_dialogs__WEBPACK_IMPORTED_MODULE_10__[\"default\"].prompt(title, val, 'filename', {\n                  match: _lib_constants__WEBPACK_IMPORTED_MODULE_11__[\"default\"].FILE_NAME_REGEX,\n                  required: true\n                });\n\n              case 19:\n                entryName = _context8.sent;\n\n                if (entryName) {\n                  _context8.next = 22;\n                  break;\n                }\n\n                return _context8.abrupt(\"return\");\n\n              case 22:\n                entryName = _utils_helpers__WEBPACK_IMPORTED_MODULE_8__[\"default\"].removeLineBreaks(entryName);\n                _context8.prev = 23;\n                fs = (0,_fileSystem_fsOperation__WEBPACK_IMPORTED_MODULE_18__[\"default\"])(url);\n\n                if (!(arg === 'folder')) {\n                  _context8.next = 28;\n                  break;\n                }\n\n                _context8.next = 28;\n                return fs.createDirectory(entryName);\n\n              case 28:\n                if (!(arg === 'file')) {\n                  _context8.next = 31;\n                  break;\n                }\n\n                _context8.next = 31;\n                return fs.createFile(entryName);\n\n              case 31:\n                updateAddedFolder(url);\n                reload();\n                _context8.next = 38;\n                break;\n\n              case 35:\n                _context8.prev = 35;\n                _context8.t0 = _context8[\"catch\"](23);\n                _utils_helpers__WEBPACK_IMPORTED_MODULE_8__[\"default\"].error(_context8.t0);\n\n              case 38:\n                return _context8.abrupt(\"return\");\n\n              case 39:\n                if (!(arg === 'project')) {\n                  _context8.next = 67;\n                  break;\n                }\n\n                /**\r\n                 * Initiating project options\r\n                 */\n                Object.keys(_projects__WEBPACK_IMPORTED_MODULE_20__[\"default\"]).map(function (projectname) {\n                  options.push([projectname, projectname, 'icon ' + projectname]);\n                });\n                _context8.next = 43;\n                return _components_dialogs__WEBPACK_IMPORTED_MODULE_10__[\"default\"].select(strings['new project'], options);\n\n              case 43:\n                framework = _context8.sent;\n                _components_dialogs__WEBPACK_IMPORTED_MODULE_10__[\"default\"].loader.create(framework, strings.loading + '...');\n                _context8.next = 47;\n                return _projects__WEBPACK_IMPORTED_MODULE_20__[\"default\"][framework]();\n\n              case 47:\n                project = _context8.sent.default;\n                _components_dialogs__WEBPACK_IMPORTED_MODULE_10__[\"default\"].loader.destroy();\n                _context8.next = 51;\n                return _components_dialogs__WEBPACK_IMPORTED_MODULE_10__[\"default\"].prompt(strings['project name'], framework, 'text', {\n                  required: true,\n                  match: _lib_constants__WEBPACK_IMPORTED_MODULE_11__[\"default\"].FILE_NAME_REGEX\n                });\n\n              case 51:\n                projectName = _context8.sent;\n                _context8.prev = 52;\n                _fs = (0,_fileSystem_fsOperation__WEBPACK_IMPORTED_MODULE_18__[\"default\"])(url);\n                _components_dialogs__WEBPACK_IMPORTED_MODULE_10__[\"default\"].loader.create(projectName, strings.loading + '...');\n                _context8.next = 57;\n                return _fs.createDirectory(projectName);\n\n              case 57:\n                newUrl = _utils_Url__WEBPACK_IMPORTED_MODULE_21__[\"default\"].join(url, projectName, '/');\n                files = Object.keys(project); // All project files\n\n                _context8.next = 61;\n                return createProject(files);\n\n              case 61:\n                _context8.next = 66;\n                break;\n\n              case 63:\n                _context8.prev = 63;\n                _context8.t1 = _context8[\"catch\"](52);\n                _utils_helpers__WEBPACK_IMPORTED_MODULE_8__[\"default\"].error(_context8.t1);\n\n              case 66:\n                _components_dialogs__WEBPACK_IMPORTED_MODULE_10__[\"default\"].loader.destroy();\n\n              case 67:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, null, [[23, 35], [52, 63]]);\n      }));\n      return _create.apply(this, arguments);\n    }\n\n    function pushToNavbar(name, url, action) {\n      $navigation.append(html_tag_js__WEBPACK_IMPORTED_MODULE_5___default()('span', {\n        id: getNavId(url),\n        className: 'nav',\n        data_url: url,\n        data_name: name,\n        attr: {\n          action: 'navigation',\n          text: name\n        },\n        tabIndex: -1\n      }));\n      $navigation.scrollLeft = $navigation.scrollWidth;\n\n      if (action && !actionStack.has(url)) {\n        actionStack.push({\n          id: url,\n          action: action\n        });\n      }\n    }\n    /**\r\n     * Loads up given states\r\n     * @param {Array<Location>} states\r\n     */\n\n\n    function loadStates(states) {\n      if (!Array.isArray(states)) return;\n      var backNavigation = [];\n\n      var _states$pop = states.pop(),\n          url = _states$pop.url,\n          name = _states$pop.name;\n\n      var _currentDir2 = currentDir,\n          lastUrl = _currentDir2.url,\n          lastName = _currentDir2.name;\n\n      while (states.length) {\n        var location = states.splice(0, 1)[0];\n        var _url = location.url,\n            _name = location.name;\n        var action = void 0;\n        if (doesOpenLast) pushState({\n          name: _name,\n          url: _url\n        });\n\n        if (lastUrl && lastName) {\n          backNavigation.push([lastUrl, lastName]);\n\n          action = function action() {\n            var _backNavigation$pop = backNavigation.pop(),\n                _backNavigation$pop2 = (0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_backNavigation$pop, 2),\n                url = _backNavigation$pop2[0],\n                name = _backNavigation$pop2[1];\n\n            navigate(url, name, false);\n          };\n        }\n\n        pushToNavbar(_name, _url, action);\n        lastUrl = _url;\n        lastName = _name;\n      }\n\n      currentDir = {\n        url: lastUrl,\n        name: lastName\n      };\n      navigate(url, name);\n    }\n    /**\r\n     *\r\n     * @param {String} url\r\n     */\n\n\n    function getNavId(url) {\n      return \"nav_\".concat(url.hashCode());\n    }\n    /**\r\n     * Updates folders that are added in sidebar\r\n     * @param {String} url\r\n     */\n\n\n    function updateAddedFolder(url) {\n      if (cachedDir[url]) delete cachedDir[url];\n      if (cachedDir[currentDir.url]) delete cachedDir[currentDir.url];\n      var regex = new RegExp(_utils_Url__WEBPACK_IMPORTED_MODULE_21__[\"default\"].parse(url).url);\n\n      var _iterator2 = _createForOfIteratorHelper(addedFolder),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var folder = _step2.value;\n\n          if (folder.url === url) {\n            folder.remove();\n          } else if (regex.test(currentDir.url)) {\n            folder.reload();\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n    /**\r\n     *\r\n     * @param {Storage} storage\r\n     * @param {Boolean} doesRleoad\r\n     */\n\n\n    function updateStorage(storage) {\n      var doesRleoad = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      if (storage.uuid) {\n        storageList = storageList.filter(function (s) {\n          return s.uuid !== storage.uuid;\n        });\n      } else {\n        storage.uuid = _utils_helpers__WEBPACK_IMPORTED_MODULE_8__[\"default\"].uuid();\n      }\n\n      if (!storage.type) {\n        storage.type = 'dir';\n      }\n\n      if (!storage.storageType) {\n        storage.storageType = storage.type;\n      }\n\n      storageList.push(storage);\n      localStorage.storageList = JSON.stringify(storageList);\n      if (doesRleoad) reload();\n    }\n\n    function render(dir) {\n      var list = dir.list,\n          scroll = dir.scroll;\n      var $list = html_tag_js__WEBPACK_IMPORTED_MODULE_5___default().parse(mustache__WEBPACK_IMPORTED_MODULE_6__[\"default\"].render(_list_hbs__WEBPACK_IMPORTED_MODULE_14__[\"default\"], {\n        msg: strings['empty folder message'],\n        list: list\n      }));\n      var $oldList = $content.get('#list');\n\n      if ($oldList) {\n        var _currentDir3 = currentDir,\n            url = _currentDir3.url;\n\n        if (url && cachedDir[url]) {\n          cachedDir[url].scroll = $oldList.scrollTop;\n        }\n\n        $oldList.remove();\n      }\n\n      $content.append($list);\n      $list.scrollTop = scroll;\n      $list.focus(); //Adding notification to icon to let user know about new feature\n\n      if (dir.url === '/') {\n        checkAndSetNotification();\n      } else {\n        $menuToggler.classList.remove('notice');\n        $addMenuToggler.classList.remove('notice');\n      }\n\n      currentDir = dir;\n      cachedDir[dir.url] = dir;\n    }\n\n    function reload() {\n      var _currentDir4 = currentDir,\n          url = _currentDir4.url,\n          name = _currentDir4.name;\n      delete cachedDir[url];\n      navigate(url, name);\n    }\n\n    function pushState(_ref) {\n      var url = _ref.url,\n          name = _ref.name;\n      if (!url || !name) return;\n      if (state.find(function (l) {\n        return l.url === url;\n      })) return;\n      state.push({\n        url: url,\n        name: name\n      });\n      localStorage.fileBrowserState = JSON.stringify(state);\n    }\n    /**\r\n     * Adds a new storage and refresh location\r\n     */\n\n\n    function addStorage() {\n      _util__WEBPACK_IMPORTED_MODULE_22__[\"default\"].addPath().then(function (res) {\n        storageList.push(res);\n        localStorage.storageList = JSON.stringify(storageList);\n        reload();\n      }).catch(function (err) {\n        _utils_helpers__WEBPACK_IMPORTED_MODULE_8__[\"default\"].error(err);\n      });\n    }\n  });\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (FileBrowserInclude);\n\n//# sourceURL=webpack://com.foxdebug.acode/./src/pages/fileBrowser/fileBrowser.include.js?");

/***/ }),

/***/ "./src/pages/fileBrowser/projects.js":
/*!*******************************************!*\
  !*** ./src/pages/fileBrowser/projects.js ***!
  \*******************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n//jshint ignore:start\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  angular: function angular() {\n    return __webpack_require__.e(/*! import() | angular */ \"angular\").then(__webpack_require__.bind(__webpack_require__, /*! ./projects/ng */ \"./src/pages/fileBrowser/projects/ng.js\"));\n  },\n  angularjs: function angularjs() {\n    return __webpack_require__.e(/*! import() | angularjs */ \"angularjs\").then(__webpack_require__.bind(__webpack_require__, /*! ./projects/ngjs */ \"./src/pages/fileBrowser/projects/ngjs.js\"));\n  },\n  html: function html() {\n    return __webpack_require__.e(/*! import() | html */ \"html\").then(__webpack_require__.bind(__webpack_require__, /*! ./projects/html */ \"./src/pages/fileBrowser/projects/html.js\"));\n  },\n  react: function react() {\n    return __webpack_require__.e(/*! import() | react */ \"react\").then(__webpack_require__.bind(__webpack_require__, /*! ./projects/react */ \"./src/pages/fileBrowser/projects/react.js\"));\n  },\n  vue: function vue() {\n    return __webpack_require__.e(/*! import() | vue */ \"vue\").then(__webpack_require__.bind(__webpack_require__, /*! ./projects/vue */ \"./src/pages/fileBrowser/projects/vue.js\"));\n  }\n});\n\n//# sourceURL=webpack://com.foxdebug.acode/./src/pages/fileBrowser/projects.js?");

/***/ }),

/***/ "./src/pages/fileBrowser/util.js":
/*!***************************************!*\
  !*** ./src/pages/fileBrowser/util.js ***!
  \***************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/esm/defineProperty.js\");\n/* harmony import */ var html_tag_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! html-tag-js */ \"./node_modules/html-tag-js/dist/tag.js\");\n/* harmony import */ var html_tag_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(html_tag_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_dialogs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../components/dialogs */ \"./src/components/dialogs.js\");\n/* harmony import */ var _utils_helpers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/helpers */ \"./src/utils/helpers.js\");\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  /**\r\n   *\r\n   * @param {Array} list\r\n   * @param {String} name\r\n   * @param {String} url\r\n   * @param {Object} extra\r\n   */\n  pushFolder: function pushFolder(list, name, url) {\n    var extra = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    list.push(_objectSpread({\n      url: url,\n      name: name,\n      isDirectory: true,\n      parent: true,\n      type: 'dir'\n    }, extra));\n  },\n\n  /**\r\n   *\r\n   * @param {String} name\r\n   * @returns {Promise<{name: String, uri: String, uuid: string}>}\r\n   */\n  addPath: function addPath() {\n    var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n    var uuid = arguments.length > 1 ? arguments[1] : undefined;\n    return new Promise(function (resolve, reject) {\n      _components_dialogs__WEBPACK_IMPORTED_MODULE_2__[\"default\"].multiPrompt(strings['add path'], [{\n        id: 'uri',\n        placeholder: strings['select folder'],\n        type: 'text',\n        required: true,\n        readOnly: true,\n        onclick: function onclick() {\n          var _this = this;\n\n          sdcard.getStorageAccessPermission(uuid, function (res) {\n            var $name = html_tag_js__WEBPACK_IMPORTED_MODULE_1___default().get('#name');\n\n            if (!$name.value && res) {\n              var _window$decodeURIComp, _window$decodeURIComp2;\n\n              var _name = (_window$decodeURIComp = window.decodeURIComponent(res)) === null || _window$decodeURIComp === void 0 ? void 0 : (_window$decodeURIComp2 = _window$decodeURIComp.split(':').pop()) === null || _window$decodeURIComp2 === void 0 ? void 0 : _window$decodeURIComp2.split('/').pop();\n\n              $name.value = _name !== null && _name !== void 0 ? _name : '';\n            }\n\n            _this.value = res;\n          }, function (err) {\n            _utils_helpers__WEBPACK_IMPORTED_MODULE_3__[\"default\"].error(err);\n          });\n        }\n      }, {\n        id: 'name',\n        placeholder: strings['folder name'],\n        type: 'text',\n        required: true,\n        value: name\n      }], 'https://acode.foxdebug.com/faqs/224761680').then(function (values) {\n        var name = values.name,\n            uri = values.uri;\n        resolve({\n          name: name,\n          uri: uri,\n          uuid: _utils_helpers__WEBPACK_IMPORTED_MODULE_3__[\"default\"].uuid()\n        });\n      });\n    });\n  }\n});\n\n//# sourceURL=webpack://com.foxdebug.acode/./src/pages/fileBrowser/util.js?");

/***/ }),

/***/ "./src/settings/filesSettings.js":
/*!***************************************!*\
  !*** ./src/settings/filesSettings.js ***!
  \***************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ filesSettings; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/esm/defineProperty.js\");\n/* harmony import */ var _components_settingPage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/settingPage */ \"./src/components/settingPage.js\");\n\n\nfunction filesSettings(callback) {\n  var title = strings.settings.capitalize();\n  var values = appSettings.value.fileBrowser;\n  var items = [{\n    key: 'sort',\n    text: strings['sort by name'],\n    checkbox: values.sortByName\n  }, {\n    key: 'show',\n    text: strings['show hidden files'],\n    checkbox: values.showHiddenFiles\n  }];\n\n  function callback(key, value) {\n    appSettings.update((0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])({}, key, value));\n    if (callback) callback();\n  }\n\n  (0,_components_settingPage__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(title, items, callback);\n}\n\n//# sourceURL=webpack://com.foxdebug.acode/./src/settings/filesSettings.js?");

/***/ }),

/***/ "./src/pages/fileBrowser/fileBrowser.scss":
/*!************************************************!*\
  !*** ./src/pages/fileBrowser/fileBrowser.scss ***!
  \************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n\n\n//# sourceURL=webpack://com.foxdebug.acode/./src/pages/fileBrowser/fileBrowser.scss?");

/***/ }),

/***/ "./src/pages/fileBrowser/add-menu-home.hbs":
/*!*************************************************!*\
  !*** ./src/pages/fileBrowser/add-menu-home.hbs ***!
  \*************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<li action='add-path' {{#addPathNotice}}class=\\\"notice\\\"{{/addPathNotice}}>{{add path}}</li>\\r\\n<li action='addFtp'>{{add ftp}}</li>\\r\\n<li action='addSftp' {{#addSftpNotice}}class=\\\"notice\\\"{{/addSftpNotice}}>{{add sftp}}</li>\");\n\n//# sourceURL=webpack://com.foxdebug.acode/./src/pages/fileBrowser/add-menu-home.hbs?");

/***/ }),

/***/ "./src/pages/fileBrowser/add-menu.hbs":
/*!********************************************!*\
  !*** ./src/pages/fileBrowser/add-menu.hbs ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<li action=\\\"create\\\" value=\\\"file\\\">{{new file}}</li>\\n<li action=\\\"create\\\" value=\\\"folder\\\">{{new folder}}</li>\\n<li action=\\\"create\\\" value=\\\"project\\\">{{new project}}</li>\");\n\n//# sourceURL=webpack://com.foxdebug.acode/./src/pages/fileBrowser/add-menu.hbs?");

/***/ }),

/***/ "./src/pages/fileBrowser/fileBrowser.hbs":
/*!***********************************************!*\
  !*** ./src/pages/fileBrowser/fileBrowser.hbs ***!
  \***********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div tabindex='-1' class='main' id='file-browser' type='{{type}}'>\\r\\n  <div class='navigation' tabindex='-1'></div>\\r\\n  <div class='info'>ⓘ {{info}}</div>\\r\\n</div>\");\n\n//# sourceURL=webpack://com.foxdebug.acode/./src/pages/fileBrowser/fileBrowser.hbs?");

/***/ }),

/***/ "./src/pages/fileBrowser/list.hbs":
/*!****************************************!*\
  !*** ./src/pages/fileBrowser/list.hbs ***!
  \****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<ul class=\\\"list\\\" id=\\\"list\\\" empty-msg=\\\"{{msg}}\\\">{{#list}}\\r\\n  {{#.}}\\r\\n  <li \\r\\n    tabindex=\\\"1\\\" \\r\\n    class=\\\"tile\\\" \\r\\n    action=\\\"open\\\" \\r\\n    type=\\\"{{type}}\\\" \\r\\n    name=\\\"{{name}}\\\"\\r\\n    {{#home}}home=\\\"{{.}}\\\"{{/home}}\\r\\n    {{#open-doc}}open-doc=\\\"true\\\"{{/open-doc}} \\r\\n    {{#ftp-account}}ftp-account{{/ftp-account}}\\r\\n    {{#disabled}}disabled{{/disabled}}\\r\\n    {{#uuid}}uuid=\\\"{{uuid}}\\\"{{/uuid}} \\r\\n    {{#storageType}}storageType=\\\"{{.}}\\\"{{/storageType}}\\r\\n  >\\r\\n    <span \\r\\n      class=\\\"icon {{icon}} {{#uuid}}user-added-storage{{/uuid}}\\\" \\r\\n      {{#storageType}}storageType=\\\"{{.}}\\\"{{/storageType}}\\r\\n    ></span>\\r\\n    \\r\\n    <div class=\\\"text\\\">\\r\\n      <span>{{name}}</span>\\r\\n    </div>\\r\\n    <data-url>{{url}}</data-url>\\r\\n  </li>\\r\\n  {{/.}}\\r\\n  {{/list}}\\r\\n</ul>\");\n\n//# sourceURL=webpack://com.foxdebug.acode/./src/pages/fileBrowser/list.hbs?");

/***/ })

}]);