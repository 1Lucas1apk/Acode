"use strict";(self.webpackChunkcom_foxdebug_acode=self.webpackChunkcom_foxdebug_acode||[]).push([[145],{67632:function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var i=n(8187),s=n.n(i),a=n(53124),r=n(73305),c=n(34325),o=n(67881),l=n(50673),d=n(69427),p=n(15423),f=n(79870),g=n(2802),m=n(65119),u=n(40030),h=function(e){const t=Object.keys(e.files),n=(0,r.Z)(t[0]||"Gist:"+e.id),i={files:()=>{const t=[];return Object.values(e.files).map((e=>{t.push({filename:e.filename,type:c.Z.getIconForFile(e.filename)})})),t},msg:strings["empty folder message"]},h=s().parse(a.Z.render("<div id='gistFiles' empty-msg='{{msg}}' class='main list'>{{#files}}\r\n    <div class='list-item' action='file' filename='{{filename}}'>\r\n      <span class='icon {{type}}'></span>\r\n      <div class='container'>\r\n        <div class='text'>\r\n          <span>{{filename}}</span>\r\n        </div>\r\n      </div>\r\n      <span class='icon delete' action='delete-file'></span>\r\n    </div>\r\n  {{/files}}</div>",i)),Z=(0,m.Z)("more_vert","toggle-menu"),k=(0,o.Z)(a.Z.render("<li action='create'>\r\n  <span class='text'>{{new file}}</span>\r\n  <span class='icon file-control document-add'></span>\r\n</li>\r\n<li action='delete-gist'>\r\n  <span class='text'>Delete gist</span>\r\n  <span class='icon delete'></span>\r\n</li>",strings),{top:"8px",right:"8px",toggle:Z,transformOrigin:"top right"}),v=s()("span",{className:"icon search",attr:{action:"search"}});function b(t){const n=t.target,i=n.getAttribute("action");if(i)switch(["create","delete-gist"].includes(i)&&k.hide(),i){case"file":!function(){const t=n.getAttribute("filename");new u.Z(t,{type:"gist",text:e.files[t].content,isUnsaved:!1,record:e,render:!0}),actionStack.pop(),actionStack.pop(),actionStack.pop()}();break;case"share":break;case"create":l.Z.prompt(strings["enter file name"],strings["new file"],"text",{match:f.Z.FILE_NAME_REGEX,required:!0}).then((t=>{e.addFile(t),new u.Z(t,{type:"gist",filename:t,isUnsaved:!1,record:e,render:!0}),actionStack.pop(),actionStack.pop(),actionStack.pop()}));break;case"delete-gist":l.Z.confirm(strings.warning,strings["delete {name}"].replace("{name}","Gist: "+e.id)).then((t=>{if(!t)return;const n=p.Z.GitHub().getGist(e.id);l.Z.loader.create("",strings.loading+"..."),n.delete().then((t=>{if(204===t.status){for(let t of editorManager.files)"gist"===t.type&&t.record.id===e.id&&t.remove(!0);toast(strings.success),actionStack.pop(),actionStack.pop(),(0,d.Z)((t=>{let n;for(let[i,s]of t.entries())if(s.id===e.id){n=i;break}return void 0!==n&&t.splice(n,1),t}))}})).catch((e=>{e&&(console.error(e),l.Z.alert(strings.error,e.toString()))})).finally((()=>{l.Z.loader.destroy()}))}));break;case"delete-file":!function(){const t=n.parentElement.getAttribute("filename");l.Z.confirm(strings.warning,strings["delete {name}"].replace("{name}",t)).then((i=>{i&&t&&(l.Z.loader.create(t,strings.loading+"..."),e.removeFile(t).then((()=>{n.parentElement.remove(),toast(strings.success)})).catch((e=>{e&&l.Z.alert(strings.error,e.toString())})).finally((()=>{l.Z.loader.destroy()})))}))}()}}h.addEventListener("click",b),k.addEventListener("click",b),n.body=h,n.header.append(v,Z),v.onclick=()=>(0,g.Z)(n.querySelector(".list")),app.appendChild(n),c.Z.showAd(),actionStack.push({id:"gistFiles",action(){c.Z.hideAd(),n.hide()}})}}}]);