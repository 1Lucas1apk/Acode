"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkcom_foxdebug_acode"] = self["webpackChunkcom_foxdebug_acode"] || []).push([["plugins"],{

/***/ "./src/lib/installPlugin.js":
/*!**********************************!*\
  !*** ./src/lib/installPlugin.js ***!
  \**********************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ installPlugin; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/esm/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _deadlyjack_ajax__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @deadlyjack/ajax */ \"./node_modules/@deadlyjack/ajax/dist/ajax.js\");\n/* harmony import */ var _deadlyjack_ajax__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_deadlyjack_ajax__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _components_dialogs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/dialogs */ \"./src/components/dialogs.js\");\n/* harmony import */ var _fileSystem_fsOperation__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../fileSystem/fsOperation */ \"./src/fileSystem/fsOperation.js\");\n/* harmony import */ var _loadPlugin__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./loadPlugin */ \"./src/lib/loadPlugin.js\");\n/* harmony import */ var _utils_helpers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/helpers */ \"./src/utils/helpers.js\");\n/* harmony import */ var _utils_Url__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/Url */ \"./src/utils/Url.js\");\n\n\n\n\n\n\n\n\n\n/**\n * Installs a plugin.\n * @param {PluginJson} plugin \n */\n\nfunction installPlugin(_x, _x2) {\n  return _installPlugin.apply(this, arguments);\n}\n\nfunction _installPlugin() {\n  _installPlugin = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark(function _callee2(plugin, host) {\n    var loader, pluginDir, mainJs, rootDir, files, readFiles, _yield$Promise$all, _yield$Promise$all2, main, icon, readme, promises, progress;\n\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            progress = function _progress(label, ratio) {\n              var percent = Math.round(ratio * 10000) / 100;\n              loader.setTitle(\"\".concat(plugin.name));\n              loader.setMessage(\"file: \".concat(label, \"\\n\").concat(strings.installing, \" \").concat(Math.min(percent, 100), \"%\"));\n            };\n\n            loader = _components_dialogs__WEBPACK_IMPORTED_MODULE_4__[\"default\"].loader.create(plugin.name, strings.installing);\n            _context2.prev = 2;\n            plugin.host = host;\n            plugin.installed = true;\n            mainJs = _utils_Url__WEBPACK_IMPORTED_MODULE_8__[\"default\"].join(host, plugin.main);\n            rootDir = _utils_Url__WEBPACK_IMPORTED_MODULE_8__[\"default\"].dirname(mainJs);\n            files = plugin.files;\n            pluginDir = _utils_Url__WEBPACK_IMPORTED_MODULE_8__[\"default\"].join(PLUGIN_DIR, plugin.id); // create plugin directory\n\n            _context2.next = 11;\n            return (0,_fileSystem_fsOperation__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(pluginDir).exists();\n\n          case 11:\n            if (!_context2.sent) {\n              _context2.next = 14;\n              break;\n            }\n\n            _context2.next = 14;\n            return (0,_fileSystem_fsOperation__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(pluginDir).delete();\n\n          case 14:\n            readFiles = [];\n            readFiles.push(_deadlyjack_ajax__WEBPACK_IMPORTED_MODULE_3___default()({\n              url: mainJs,\n              method: 'GET',\n              responseType: 'arraybuffer',\n              onprogress: function onprogress(loaded, total) {\n                progress(plugin.name, loaded / total);\n              }\n            }), _deadlyjack_ajax__WEBPACK_IMPORTED_MODULE_3___default()({\n              url: _utils_Url__WEBPACK_IMPORTED_MODULE_8__[\"default\"].join(host, plugin.icon),\n              method: 'GET',\n              responseType: 'arraybuffer',\n              onprogress: function onprogress(loaded, total) {\n                progress('icon', loaded / total);\n              }\n            }), _deadlyjack_ajax__WEBPACK_IMPORTED_MODULE_3___default()({\n              url: _utils_Url__WEBPACK_IMPORTED_MODULE_8__[\"default\"].join(host, plugin.readme),\n              method: 'GET',\n              responseType: 'arraybuffer',\n              onprogress: function onprogress(loaded, total) {\n                progress('readme', loaded / total);\n              }\n            }));\n            _context2.next = 18;\n            return Promise.all(readFiles);\n\n          case 18:\n            _yield$Promise$all = _context2.sent;\n            _yield$Promise$all2 = (0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(_yield$Promise$all, 3);\n            main = _yield$Promise$all2[0];\n            icon = _yield$Promise$all2[1];\n            readme = _yield$Promise$all2[2];\n            _context2.next = 25;\n            return (0,_fileSystem_fsOperation__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(PLUGIN_DIR).createDirectory(plugin.id);\n\n          case 25:\n            promises = [];\n            promises.push((0,_fileSystem_fsOperation__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(pluginDir).createFile('main.js', main), (0,_fileSystem_fsOperation__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(pluginDir).createFile('plugin.json', JSON.stringify(plugin, null, 2)), (0,_fileSystem_fsOperation__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(pluginDir).createFile('readme.md', readme), (0,_fileSystem_fsOperation__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(pluginDir).createFile('icon.png', icon)); // copy files\n\n            if (Array.isArray(files)) {\n              files.forEach(function (file) {\n                promises.push((0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark(function _callee() {\n                  return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          _context.next = 2;\n                          return _utils_helpers__WEBPACK_IMPORTED_MODULE_7__[\"default\"].createFileRecursive(pluginDir, file);\n\n                        case 2:\n                          _context.t0 = (0,_fileSystem_fsOperation__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(_utils_Url__WEBPACK_IMPORTED_MODULE_8__[\"default\"].join(pluginDir, file));\n                          _context.next = 5;\n                          return _deadlyjack_ajax__WEBPACK_IMPORTED_MODULE_3___default()({\n                            url: _utils_Url__WEBPACK_IMPORTED_MODULE_8__[\"default\"].join(rootDir, file),\n                            method: 'GET',\n                            responseType: 'arraybuffer',\n                            onprogress: function onprogress(loaded, total) {\n                              progress(file, loaded / total);\n                            }\n                          });\n\n                        case 5:\n                          _context.t1 = _context.sent;\n                          _context.next = 8;\n                          return _context.t0.writeFile.call(_context.t0, _context.t1);\n\n                        case 8:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                }))());\n              });\n            }\n\n            _context2.next = 30;\n            return Promise.all(promises);\n\n          case 30:\n            toast(strings.success);\n            (0,_loadPlugin__WEBPACK_IMPORTED_MODULE_6__[\"default\"])(plugin.id);\n            _context2.next = 40;\n            break;\n\n          case 34:\n            _context2.prev = 34;\n            _context2.t0 = _context2[\"catch\"](2);\n\n            if (!pluginDir) {\n              _context2.next = 39;\n              break;\n            }\n\n            _context2.next = 39;\n            return (0,_fileSystem_fsOperation__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(pluginDir).delete();\n\n          case 39:\n            throw new Error('Cannot install plugin');\n\n          case 40:\n            _context2.prev = 40;\n            _components_dialogs__WEBPACK_IMPORTED_MODULE_4__[\"default\"].loader.destroy();\n            return _context2.finish(40);\n\n          case 43:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[2, 34, 40, 43]]);\n  }));\n  return _installPlugin.apply(this, arguments);\n}\n\n//# sourceURL=webpack://com.foxdebug.acode/./src/lib/installPlugin.js?");

/***/ }),

/***/ "./src/pages/plugin/plugin.include.js":
/*!********************************************!*\
  !*** ./src/pages/plugin/plugin.include.js ***!
  \********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ PluginInclude; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/defineProperty */ \"./node_modules/@babel/runtime/helpers/esm/defineProperty.js\");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/slicedToArray */ \"./node_modules/@babel/runtime/helpers/esm/slicedToArray.js\");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _plugin_scss__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./plugin.scss */ \"./src/pages/plugin/plugin.scss\");\n/* harmony import */ var mustache__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! mustache */ \"./node_modules/mustache/mustache.mjs\");\n/* harmony import */ var _plugin_hbs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./plugin.hbs */ \"./src/pages/plugin/plugin.hbs\");\n/* harmony import */ var _components_page__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../components/page */ \"./src/components/page.js\");\n/* harmony import */ var _deadlyjack_ajax__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @deadlyjack/ajax */ \"./node_modules/@deadlyjack/ajax/dist/ajax.js\");\n/* harmony import */ var _deadlyjack_ajax__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_deadlyjack_ajax__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _utils_helpers__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../utils/helpers */ \"./src/utils/helpers.js\");\n/* harmony import */ var marked__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! marked */ \"./node_modules/marked/lib/marked.esm.js\");\n/* harmony import */ var _utils_Url__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../utils/Url */ \"./src/utils/Url.js\");\n/* harmony import */ var _lib_installPlugin__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../lib/installPlugin */ \"./src/lib/installPlugin.js\");\n/* harmony import */ var _fileSystem_fsOperation__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../fileSystem/fsOperation */ \"./src/fileSystem/fsOperation.js\");\n/* harmony import */ var html_tag_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! html-tag-js */ \"./node_modules/html-tag-js/dist/tag.js\");\n/* harmony import */ var html_tag_js__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(html_tag_js__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var _lib_constants__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../lib/constants */ \"./src/lib/constants.js\");\n\n\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction PluginInclude(_x) {\n  return _PluginInclude.apply(this, arguments);\n}\n\nfunction _PluginInclude() {\n  _PluginInclude = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().mark(function _callee(json) {\n    var installed,\n        onInstall,\n        onUninstall,\n        $page,\n        host,\n        readme,\n        icon,\n        version,\n        plugin,\n        cancelled,\n        update,\n        remotePlugin,\n        remoteHost,\n        promises,\n        pluginJson,\n        _yield$Promise$all,\n        _yield$Promise$all2,\n        handleClick,\n        render,\n        _args = arguments;\n\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_3___default().wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            render = function _render() {\n              var isPaid = ['paid', 'premium', 'pro'].includes(plugin.type) && IS_FREE_VERSION;\n              $page.body = html_tag_js__WEBPACK_IMPORTED_MODULE_14___default().parse(mustache__WEBPACK_IMPORTED_MODULE_5__[\"default\"].render(_plugin_hbs__WEBPACK_IMPORTED_MODULE_6__[\"default\"], _objectSpread(_objectSpread({}, plugin), {}, {\n                readme: readme,\n                version: version,\n                icon: icon,\n                body: readme ? (0,marked__WEBPACK_IMPORTED_MODULE_10__.marked)(readme) : '',\n                installed: installed,\n                update: update,\n                strings: strings,\n                isPaid: isPaid\n              })));\n\n              if (isPaid) {\n                var $installBtn = $page.get('[action=\"install\"]');\n                if ($installBtn) $installBtn.style.display = 'none';\n              }\n            };\n\n            handleClick = function _handleClick(e) {\n              var $target = e.target;\n              var action = $target.getAttribute('action');\n\n              if (action === 'install') {\n                if (!remotePlugin) {\n                  toast('Cannot install plugin');\n                  return;\n                }\n\n                (0,_lib_installPlugin__WEBPACK_IMPORTED_MODULE_12__[\"default\"])(remotePlugin, remoteHost).then(function () {\n                  acode.unmountPlugin(plugin.id);\n                  onInstall(plugin.id);\n                  installed = true;\n                  update = false;\n                  render();\n                }).catch(function (err) {\n                  _utils_helpers__WEBPACK_IMPORTED_MODULE_9__[\"default\"].error(err);\n                });\n              }\n\n              if (action === 'uninstall') {\n                (0,_fileSystem_fsOperation__WEBPACK_IMPORTED_MODULE_13__[\"default\"])(_utils_Url__WEBPACK_IMPORTED_MODULE_11__[\"default\"].join(PLUGIN_DIR, plugin.id)).delete().then(function () {\n                  acode.unmountPlugin(plugin.id);\n                  onUninstall(plugin.id);\n                  installed = false;\n                  update = false;\n                  render();\n                }).catch(function (err) {\n                  _utils_helpers__WEBPACK_IMPORTED_MODULE_9__[\"default\"].error(err);\n                });\n              }\n\n              if (action === 'buy') {\n                system.openInBrowser(_lib_constants__WEBPACK_IMPORTED_MODULE_15__[\"default\"].PAID_VERSION);\n              }\n            };\n\n            installed = _args.length > 1 && _args[1] !== undefined ? _args[1] : false;\n            onInstall = _args.length > 2 ? _args[2] : undefined;\n            onUninstall = _args.length > 3 ? _args[3] : undefined;\n            $page = (0,_components_page__WEBPACK_IMPORTED_MODULE_7__[\"default\"])('Plugin');\n            host = _utils_Url__WEBPACK_IMPORTED_MODULE_11__[\"default\"].dirname(json);\n            readme = '';\n            icon = '';\n            version = '';\n            plugin = {};\n            cancelled = false;\n            update = false;\n            actionStack.push({\n              id: 'plugin',\n              action: $page.hide\n            });\n\n            $page.onhide = function () {\n              _utils_helpers__WEBPACK_IMPORTED_MODULE_9__[\"default\"].hideAd();\n              actionStack.remove('plugin');\n              _utils_helpers__WEBPACK_IMPORTED_MODULE_9__[\"default\"].removeTitleLoader();\n              cancelled = true;\n            };\n\n            $page.onclick = handleClick;\n            app.append($page);\n            _utils_helpers__WEBPACK_IMPORTED_MODULE_9__[\"default\"].showAd();\n            _utils_helpers__WEBPACK_IMPORTED_MODULE_9__[\"default\"].showTitleLoader();\n            _context.prev = 19;\n            promises = [];\n            pluginJson = '';\n\n            if (installed) {\n              promises.push((0,_fileSystem_fsOperation__WEBPACK_IMPORTED_MODULE_13__[\"default\"])(json).readFile('utf8'), (0,_fileSystem_fsOperation__WEBPACK_IMPORTED_MODULE_13__[\"default\"])(_utils_Url__WEBPACK_IMPORTED_MODULE_11__[\"default\"].join(host, 'readme.md')).readFile('utf8'));\n              icon = _utils_Url__WEBPACK_IMPORTED_MODULE_11__[\"default\"].join(host, 'icon.png');\n            } else {\n              promises.push(_deadlyjack_ajax__WEBPACK_IMPORTED_MODULE_8___default()({\n                url: json,\n                responseType: 'text'\n              }));\n            }\n\n            if (!cancelled) {\n              _context.next = 25;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 25:\n            _context.next = 27;\n            return Promise.all(promises);\n\n          case 27:\n            _yield$Promise$all = _context.sent;\n            _yield$Promise$all2 = (0,_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(_yield$Promise$all, 2);\n            pluginJson = _yield$Promise$all2[0];\n            readme = _yield$Promise$all2[1];\n            plugin = _utils_helpers__WEBPACK_IMPORTED_MODULE_9__[\"default\"].parseJSON(pluginJson);\n            version = plugin.version;\n\n            if (!icon && plugin.icon) {\n              icon = _utils_Url__WEBPACK_IMPORTED_MODULE_11__[\"default\"].join(host, plugin.icon);\n            }\n\n            $page.settitle(plugin.name);\n            render();\n\n            if (!readme && plugin.readme) {\n              _deadlyjack_ajax__WEBPACK_IMPORTED_MODULE_8___default()({\n                url: _utils_Url__WEBPACK_IMPORTED_MODULE_11__[\"default\"].join(host, plugin.readme),\n                responseType: 'text'\n              }).then(function (text) {\n                readme = text;\n                render();\n              });\n            }\n\n            if (installed) {\n              _deadlyjack_ajax__WEBPACK_IMPORTED_MODULE_8___default()({\n                url: _utils_Url__WEBPACK_IMPORTED_MODULE_11__[\"default\"].join(plugin.host, 'plugin.json'),\n                responseType: 'text'\n              }).then(function (json) {\n                remotePlugin = _utils_helpers__WEBPACK_IMPORTED_MODULE_9__[\"default\"].parseJSON(json);\n                remoteHost = plugin.host;\n\n                if (remotePlugin.version !== version) {\n                  update = remotePlugin.version;\n                  render();\n                }\n              });\n            } else {\n              remotePlugin = plugin;\n              remoteHost = host;\n            }\n\n            _context.next = 43;\n            break;\n\n          case 40:\n            _context.prev = 40;\n            _context.t0 = _context[\"catch\"](19);\n            _utils_helpers__WEBPACK_IMPORTED_MODULE_9__[\"default\"].error(_context.t0);\n\n          case 43:\n            _context.prev = 43;\n            _utils_helpers__WEBPACK_IMPORTED_MODULE_9__[\"default\"].hideAd();\n            _utils_helpers__WEBPACK_IMPORTED_MODULE_9__[\"default\"].removeTitleLoader();\n            return _context.finish(43);\n\n          case 47:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[19, 40, 43, 47]]);\n  }));\n  return _PluginInclude.apply(this, arguments);\n}\n\n//# sourceURL=webpack://com.foxdebug.acode/./src/pages/plugin/plugin.include.js?");

/***/ }),

/***/ "./src/pages/plugin/plugin.js":
/*!************************************!*\
  !*** ./src/pages/plugin/plugin.js ***!
  \************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\nfunction plugin(_ref, onInstall, onUninstall) {\n  var plugin = _ref.plugin,\n      installed = _ref.installed;\n  __webpack_require__.e(/*! import() | plugins */ \"plugins\").then(__webpack_require__.bind(__webpack_require__, /*! ./plugin.include */ \"./src/pages/plugin/plugin.include.js\")).then(function (res) {\n    var Plugin = res.default;\n    Plugin(plugin, installed, onInstall, onUninstall);\n  });\n}\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (plugin);\n\n//# sourceURL=webpack://com.foxdebug.acode/./src/pages/plugin/plugin.js?");

/***/ }),

/***/ "./src/pages/plugins/plugins.include.js":
/*!**********************************************!*\
  !*** ./src/pages/plugins/plugins.include.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ PluginsInclude; }\n/* harmony export */ });\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/asyncToGenerator */ \"./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/regenerator */ \"./node_modules/@babel/runtime/regenerator/index.js\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _deadlyjack_ajax__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @deadlyjack/ajax */ \"./node_modules/@deadlyjack/ajax/dist/ajax.js\");\n/* harmony import */ var _deadlyjack_ajax__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_deadlyjack_ajax__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var mustache__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! mustache */ \"./node_modules/mustache/mustache.mjs\");\n/* harmony import */ var html_tag_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! html-tag-js */ \"./node_modules/html-tag-js/dist/tag.js\");\n/* harmony import */ var html_tag_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(html_tag_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _plugins_hbs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./plugins.hbs */ \"./src/pages/plugins/plugins.hbs\");\n/* harmony import */ var _list_hbs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./list.hbs */ \"./src/pages/plugins/list.hbs\");\n/* harmony import */ var _components_page__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../components/page */ \"./src/components/page.js\");\n/* harmony import */ var _utils_helpers__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../utils/helpers */ \"./src/utils/helpers.js\");\n/* harmony import */ var _components_searchbar__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../components/searchbar */ \"./src/components/searchbar.js\");\n/* harmony import */ var _fileSystem_fsOperation__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../fileSystem/fsOperation */ \"./src/fileSystem/fsOperation.js\");\n/* harmony import */ var _utils_Url__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../utils/Url */ \"./src/utils/Url.js\");\n/* harmony import */ var _plugin_plugin__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../plugin/plugin */ \"./src/pages/plugin/plugin.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * \n * @param {Array<PluginJson>} updates \n */\n\nfunction PluginsInclude(updates) {\n  var listJson = 'https://raw.githubusercontent.com/deadlyjack/acode-plugins/main/list.json';\n  var $page = (0,_components_page__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(strings['plugins']);\n  var $search = html_tag_js__WEBPACK_IMPORTED_MODULE_4___default()('span', {\n    className: 'icon search',\n    attr: {\n      action: 'search'\n    }\n  });\n  var plugins = {\n    all: [],\n    installed: []\n  };\n  var section = 'installed';\n  $page.body = html_tag_js__WEBPACK_IMPORTED_MODULE_4___default().parse(mustache__WEBPACK_IMPORTED_MODULE_3__[\"default\"].render(_plugins_hbs__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n    msg: \"\".concat(strings.loading, \"...\")\n  }));\n  $page.header.append($search);\n  actionStack.push({\n    id: 'plugins',\n    action: $page.hide\n  });\n\n  $page.onhide = function () {\n    _utils_helpers__WEBPACK_IMPORTED_MODULE_8__[\"default\"].hideAd();\n    actionStack.remove('plugins');\n    _utils_helpers__WEBPACK_IMPORTED_MODULE_8__[\"default\"].removeTitleLoader();\n  };\n\n  $page.onclick = handleClick;\n  app.append($page);\n  _utils_helpers__WEBPACK_IMPORTED_MODULE_8__[\"default\"].showAd();\n\n  if (updates) {\n    $page.get('.options').style.display = 'none';\n    $page.settitle(strings.update);\n    getInstalledPlugins(updates).then(render);\n    return;\n  }\n\n  getInstalledPlugins().then(function () {\n    render();\n  });\n\n  (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee() {\n    var _$page$get;\n\n    return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _utils_helpers__WEBPACK_IMPORTED_MODULE_8__[\"default\"].showTitleLoader();\n            _context.prev = 1;\n            _context.prev = 2;\n            _context.next = 5;\n            return getAllPlugins();\n\n          case 5:\n            _context.next = 9;\n            break;\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](2);\n\n          case 9:\n            _context.next = 14;\n            break;\n\n          case 11:\n            _context.prev = 11;\n            _context.t1 = _context[\"catch\"](1);\n            _utils_helpers__WEBPACK_IMPORTED_MODULE_8__[\"default\"].error(_context.t1);\n\n          case 14:\n            _context.prev = 14;\n            (_$page$get = $page.get('#plugin-list')) === null || _$page$get === void 0 ? void 0 : _$page$get.setAttribute('empty-msg', 'No plugins found');\n            _utils_helpers__WEBPACK_IMPORTED_MODULE_8__[\"default\"].removeTitleLoader();\n            return _context.finish(14);\n\n          case 18:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[1, 11, 14, 18], [2, 7]]);\n  }))();\n\n  function renderAll() {\n    var _$page$get2, _$page$get3;\n\n    (_$page$get2 = $page.get('[action=\"select\"].active')) === null || _$page$get2 === void 0 ? void 0 : _$page$get2.classList.remove('active');\n    (_$page$get3 = $page.get('[action=\"select\"][value=\"all\"]')) === null || _$page$get3 === void 0 ? void 0 : _$page$get3.classList.add('active');\n    $page.get('#plugin-list').innerHTML = mustache__WEBPACK_IMPORTED_MODULE_3__[\"default\"].render(_list_hbs__WEBPACK_IMPORTED_MODULE_6__[\"default\"], plugins.all);\n  }\n\n  function renderInstalled() {\n    var _$page$get4, _$page$get5;\n\n    (_$page$get4 = $page.get('[action=\"select\"].active')) === null || _$page$get4 === void 0 ? void 0 : _$page$get4.classList.remove('active');\n    (_$page$get5 = $page.get('[action=\"select\"][value=\"installed\"]')) === null || _$page$get5 === void 0 ? void 0 : _$page$get5.classList.add('active');\n    $page.get('#plugin-list').innerHTML = mustache__WEBPACK_IMPORTED_MODULE_3__[\"default\"].render(_list_hbs__WEBPACK_IMPORTED_MODULE_6__[\"default\"], plugins.installed);\n  }\n\n  function handleClick(event) {\n    var $target = event.target;\n    var action = $target.getAttribute('action');\n\n    if (action === 'search') {\n      (0,_components_searchbar__WEBPACK_IMPORTED_MODULE_9__[\"default\"])($page.get('#plugins'));\n      return;\n    }\n\n    if (action === 'open') {\n      (0,_plugin_plugin__WEBPACK_IMPORTED_MODULE_12__[\"default\"])($target.dataset, onIninstall, onUninstall);\n      return;\n    }\n\n    if (action === 'select') {\n      section = $target.getAttribute('value');\n      render();\n    }\n  }\n\n  function render() {\n    if (section === 'all') {\n      renderAll();\n      return;\n    }\n\n    if (section === 'installed') {\n      renderInstalled();\n      return;\n    }\n  }\n\n  function getAllPlugins() {\n    return _getAllPlugins.apply(this, arguments);\n  }\n\n  function _getAllPlugins() {\n    _getAllPlugins = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee2() {\n      var file;\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _deadlyjack_ajax__WEBPACK_IMPORTED_MODULE_2___default()({\n                url: listJson,\n                method: 'GET',\n                responseType: 'text'\n              });\n\n            case 2:\n              file = _context2.sent;\n              plugins.all = _utils_helpers__WEBPACK_IMPORTED_MODULE_8__[\"default\"].parseJSON(file) || []; // To test and develop plugin, update host in file: '/res/network_security_config.xml:11:43'\n              // plugins.all.push({\n              //   name: 'Plugin test',\n              //   plugin: 'http://192.168.0.103:5500/plugin.json',\n              //   icon: 'http://192.168.0.103:5500/icon.png',\n              //   author: {\n              //     name: 'DeadlyJack',\n              //   }\n              // });\n\n              if (plugins.installed.length) {\n                plugins.installed.forEach(function (localPlugin) {\n                  var plugin = plugins.all.find(function (plugin) {\n                    return plugin.name === localPlugin.name;\n                  });\n\n                  if (plugin) {\n                    plugin.installed = true;\n                    plugin.plugin = localPlugin.plugin;\n                  }\n                });\n              }\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _getAllPlugins.apply(this, arguments);\n  }\n\n  function getInstalledPlugins(_x) {\n    return _getInstalledPlugins.apply(this, arguments);\n  }\n\n  function _getInstalledPlugins() {\n    _getInstalledPlugins = (0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__[\"default\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee3(updates) {\n      var installed, promises;\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return (0,_fileSystem_fsOperation__WEBPACK_IMPORTED_MODULE_10__[\"default\"])(PLUGIN_DIR).lsDir();\n\n            case 2:\n              installed = _context3.sent;\n              promises = [];\n              installed.forEach(function (item) {\n                var id = _utils_Url__WEBPACK_IMPORTED_MODULE_11__[\"default\"].basename(item.url);\n\n                if (updates && updates.includes(id) || !updates) {\n                  promises.push((0,_fileSystem_fsOperation__WEBPACK_IMPORTED_MODULE_10__[\"default\"])(_utils_Url__WEBPACK_IMPORTED_MODULE_11__[\"default\"].join(item.url, 'plugin.json')).readFile('json'));\n                }\n              });\n              _context3.next = 7;\n              return Promise.all(promises);\n\n            case 7:\n              plugins.installed = _context3.sent;\n              plugins.installed.forEach(function (localPlugin) {\n                localPlugin.icon = getLocalRes(localPlugin.id, 'icon.png');\n                localPlugin.plugin = getLocalRes(localPlugin.id, 'plugin.json');\n              });\n\n            case 9:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n    return _getInstalledPlugins.apply(this, arguments);\n  }\n\n  function onIninstall(pluginId) {\n    var plugin = plugins.all.find(function (plugin) {\n      return plugin.id === pluginId;\n    });\n\n    if (plugin) {\n      plugin.installed = true;\n      plugins.installed.push(plugin);\n    }\n\n    render();\n  }\n\n  function onUninstall(pluginId) {\n    var plugin = plugins.installed.find(function (plugin) {\n      return plugin.id === pluginId;\n    });\n\n    if (plugin) {\n      plugin.installed = false;\n      plugins.installed = plugins.installed.filter(function (item) {\n        return item.id !== pluginId;\n      });\n    }\n\n    render();\n  }\n\n  function getLocalRes(id, name) {\n    return _utils_Url__WEBPACK_IMPORTED_MODULE_11__[\"default\"].join(PLUGIN_DIR, id, name);\n  }\n}\n\n//# sourceURL=webpack://com.foxdebug.acode/./src/pages/plugins/plugins.include.js?");

/***/ }),

/***/ "./src/pages/plugin/plugin.scss":
/*!**************************************!*\
  !*** ./src/pages/plugin/plugin.scss ***!
  \**************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n\n\n//# sourceURL=webpack://com.foxdebug.acode/./src/pages/plugin/plugin.scss?");

/***/ }),

/***/ "./src/pages/plugin/plugin.hbs":
/*!*************************************!*\
  !*** ./src/pages/plugin/plugin.hbs ***!
  \*************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div class=\\\"main\\\" id=\\\"plugin\\\">\\n  <div class=\\\"header\\\">\\n    <div class=\\\"info\\\">\\n      <span class=\\\"logo\\\" style=\\\"background-image: url({{icon}})\\\"></span>\\n      <div class=\\\"desc\\\">\\n        <span class=\\\"name\\\">{{name}}</span>\\n        <span class=\\\"version\\\">{{version}} {{#update}}&#8594; v{{update}}{{/update}}</span>\\n        <span class=\\\"author\\\" action=\\\"open\\\">{{author.name}}</span>\\n        <div action=\\\"github\\\" class=\\\"tag\\\">\\n          <span>{{#type}}{{type}}{{/type}}{{^type}}free{{/type}}</span>\\n        </div>\\n      </div>\\n    </div>\\n    <div class=\\\"button-container primary\\\">\\n      {{#installed}}<button action=\\\"uninstall\\\">{{strings.uninstall}}</button>{{/installed}}\\n      {{^installed}}<button action=\\\"install\\\">{{strings.install}}</button>{{/installed}}\\n      {{#update}}<button action=\\\"install\\\">{{strings.update}}</button>{{/update}}\\n      {{#isPaid}}<button action=\\\"buy\\\">{{#strings}}{{download acode pro}}{{/strings}}</button>{{/isPaid}}\\n    </div>\\n  </div>\\n  <div class=\\\"body md\\\">{{{body}}}</div>\\n</div>\");\n\n//# sourceURL=webpack://com.foxdebug.acode/./src/pages/plugin/plugin.hbs?");

/***/ }),

/***/ "./src/pages/plugins/list.hbs":
/*!************************************!*\
  !*** ./src/pages/plugins/list.hbs ***!
  \************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"{{#.}}\\n<div class=\\\"list-item\\\" action=\\\"open\\\" {{#installed}}data-installed=\\\"true\\\"{{/installed}} data-plugin=\\\"{{plugin}}\\\">\\n  <span \\n    class=\\\"icon\\\" \\n    style=\\\"background-image: url({{#icon}}{{icon}}{{/icon}}{{^icon}}./res/puzzle.png{{/icon}});\\\"\\n  ></span>\\n  <div class=\\\"container\\\">\\n    <div class=\\\"text\\\" style=\\\"justify-content: space-between;\\\">\\n      <a>{{name}}</a>\\n    </div>\\n    <small class=\\\"value\\\">\\n      {{#author}}<span action=\\\"open\\\" data-href=\\\"https://github.com/{{github}}\\\" class=\\\"text link\\\">{{name}}</span>{{/author}}\\n    </small>\\n  </div>\\n</div>\\n{{/.}}\");\n\n//# sourceURL=webpack://com.foxdebug.acode/./src/pages/plugins/list.hbs?");

/***/ }),

/***/ "./src/pages/plugins/plugins.hbs":
/*!***************************************!*\
  !*** ./src/pages/plugins/plugins.hbs ***!
  \***************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div class=\\\"main\\\" id=\\\"plugins\\\">\\n   <div class='options'>\\n    <span action='select' tabindex='0' value='all' class='active'>All</span>\\n    <span action='select' tabindex='0' value='installed'>Installed</span>\\n  </div>\\n  <div id='plugin-list' class='list scroll' empty-msg=\\\"{{msg}}\\\"></div>\\n</div>\");\n\n//# sourceURL=webpack://com.foxdebug.acode/./src/pages/plugins/plugins.hbs?");

/***/ })

}]);