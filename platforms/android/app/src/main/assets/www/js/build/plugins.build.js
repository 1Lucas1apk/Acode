"use strict";(self.webpackChunkcom_foxdebug_acode=self.webpackChunkcom_foxdebug_acode||[]).push([[414],{28538:function(n,e,t){t.r(e),t.d(e,{default:function(){return P}});var i=t(64922),a=t(72050),r=t(7449),s=t(76972),o=t.n(s),l=t(30011),c='<div class="main" id="plugin">\n  <div class="header">\n    <div class="info">\n      <span class="logo" style="background-image: url({{icon}})"></span>\n      <div class="desc">\n        <span class="name">{{name}}</span>\n        <span class="version">{{version}} {{#update}}&#8594; v{{update}}{{/update}}</span>\n        <span class="author" action="open">{{author.name}}</span>\n        <div action="github" class="tag">\n          <span>{{#type}}{{type}}{{/type}}{{^type}}free{{/type}}</span>\n        </div>\n      </div>\n    </div>\n    <div class="button-container primary">\n      {{#installed}}<button action="uninstall">{{strings.uninstall}}</button>{{/installed}}\n      {{^installed}}<button action="install">{{strings.install}}</button>{{/installed}}\n      {{#update}}<button action="install">{{strings.update}}</button>{{/update}}\n      {{#isPaid}}<button action="buy">{{#strings}}{{download acode pro}}{{/strings}}</button>{{/isPaid}}\n    </div>\n  </div>\n  <div class="body md">{{{body}}}</div>\n</div>',u=t(71530),d=t(73291),p=t.n(d),f=t(37519),v=t(23188),g=t(84734),h=t(44596),m=t(70559),y=t(30334);function Z(n,e){return b.apply(this,arguments)}function b(){return(b=(0,r.Z)(o().mark((function n(e,t){var i,s,l,c,u,d,v,Z,b,w,x,j,T;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return T=function(n,t){var a=Math.round(1e4*t)/100;i.setTitle("".concat(e.name)),i.setMessage("file: ".concat(n,"\n").concat(strings.installing," ").concat(Math.min(a,100),"%"))},i=h.Z.loader.create(e.name,strings.installing),n.prev=2,e.host=t,e.installed=!0,l=g.Z.join(t,e.main),c=g.Z.dirname(l),u=e.files,s=g.Z.join(PLUGIN_DIR,e.id),n.next=11,(0,m.Z)(s).exists();case 11:if(!n.sent){n.next=14;break}return n.next=14,(0,m.Z)(s).delete();case 14:return(d=[]).push(p()({url:l,method:"GET",contentType:"application/x-www-form-urlencoded",responseType:"arraybuffer",onprogress:function(n,t){T(e.name,n/t)}}),p()({url:g.Z.join(t,e.icon),method:"GET",contentType:"application/x-www-form-urlencoded",responseType:"arraybuffer",onprogress:function(n,e){T("icon",n/e)}}),p()({url:g.Z.join(t,e.readme),method:"GET",contentType:"application/x-www-form-urlencoded",responseType:"arraybuffer",onprogress:function(n,e){T("readme",n/e)}})),n.next=18,Promise.all(d);case 18:return v=n.sent,Z=(0,a.Z)(v,3),b=Z[0],w=Z[1],x=Z[2],n.next=25,(0,m.Z)(PLUGIN_DIR).createDirectory(e.id);case 25:return(j=[]).push((0,m.Z)(s).createFile("main.js",b),(0,m.Z)(s).createFile("plugin.json",JSON.stringify(e,null,2)),(0,m.Z)(s).createFile("readme.md",x),(0,m.Z)(s).createFile("icon.png",w)),Array.isArray(u)&&u.forEach((function(n){j.push((0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.Z.createFileRecursive(s,n);case 2:return e.t0=(0,m.Z)(g.Z.join(s,n)),e.next=5,p()({url:g.Z.join(c,n),method:"GET",contentType:"application/x-www-form-urlencoded",responseType:"arraybuffer",onprogress:function(e,t){T(n,e/t)}});case 5:return e.t1=e.sent,e.next=8,e.t0.writeFile.call(e.t0,e.t1);case 8:case"end":return e.stop()}}),e)})))())})),n.next=30,Promise.all(j);case 30:toast(strings.success),(0,y.Z)(e.id),n.next=40;break;case 34:if(n.prev=34,n.t0=n.catch(2),!s){n.next=39;break}return n.next=39,(0,m.Z)(s).delete();case 39:throw new Error("Cannot install plugin");case 40:return n.prev=40,h.Z.loader.destroy(),n.finish(40);case 43:case"end":return n.stop()}}),n,null,[[2,34,40,43]])})))).apply(this,arguments)}var w=t(89184),x=t.n(w),j=t(59661);function T(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,i)}return t}function k(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?T(Object(t),!0).forEach((function(e){(0,i.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function P(n){return O.apply(this,arguments)}function O(){return O=(0,r.Z)(o().mark((function n(e){var t,i,r,s,d,h,y,b,w,T,P,O,L,E,I,A,N,S,D,_=arguments;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(D=function(){var n=["paid","premium","pro"].includes(w.type)&&IS_FREE_VERSION;if(s.body=x().parse(l.Z.render(c,k(k({},w),{},{readme:h,version:b,icon:y,body:h?(0,v.TU)(h):"",installed:t,update:P,strings:strings,isPaid:n}))),n){var e=s.get('[action="install"]');e&&(e.style.display="none")}},S=function(n){var e=n.target.getAttribute("action");if("install"===e){if(!O)return void toast("Cannot install plugin");Z(O,L).then((function(){acode.unmountPlugin(w.id),i(w.id),t=!0,P=!1,D()})).catch((function(n){f.Z.error(n)}))}"uninstall"===e&&(0,m.Z)(g.Z.join(PLUGIN_DIR,w.id)).delete().then((function(){acode.unmountPlugin(w.id),r(w.id),t=!1,P=!1,D()})).catch((function(n){f.Z.error(n)})),"buy"===e&&system.openInBrowser(j.Z.PAID_VERSION)},t=_.length>1&&void 0!==_[1]&&_[1],i=_.length>2?_[2]:void 0,r=_.length>3?_[3]:void 0,s=(0,u.Z)("Plugin"),d=g.Z.dirname(e),h="",y="",b="",w={},T=!1,P=!1,actionStack.push({id:"plugin",action:s.hide}),s.onhide=function(){f.Z.hideAd(),actionStack.remove("plugin"),f.Z.removeTitleLoader(),T=!0},s.onclick=S,app.append(s),f.Z.showAd(),f.Z.showTitleLoader(),n.prev=19,E=[],I="",t?(E.push((0,m.Z)(e).readFile("utf8"),(0,m.Z)(g.Z.join(d,"readme.md")).readFile("utf8")),y=g.Z.join(d,"icon.png")):E.push(p()({url:e,responseType:"text",contentType:"application/x-www-form-urlencoded"})),!T){n.next=25;break}return n.abrupt("return");case 25:return n.next=27,Promise.all(E);case 27:A=n.sent,N=(0,a.Z)(A,2),I=N[0],h=N[1],w=f.Z.parseJSON(I),b=w.version,!y&&w.icon&&(y=g.Z.join(d,w.icon)),s.settitle(w.name),D(),!h&&w.readme&&p()({url:g.Z.join(d,w.readme),responseType:"text",contentType:"application/x-www-form-urlencoded"}).then((function(n){h=n,D()})),t?p()({url:g.Z.join(w.host,"plugin.json"),responseType:"text",contentType:"application/x-www-form-urlencoded"}).then((function(n){O=f.Z.parseJSON(n),L=w.host,O.version!==b&&(P=O.version,D())})):(O=w,L=d),n.next=43;break;case 40:n.prev=40,n.t0=n.catch(19),f.Z.error(n.t0);case 43:return n.prev=43,f.Z.hideAd(),f.Z.removeTitleLoader(),n.finish(43);case 47:case"end":return n.stop()}}),n,null,[[19,40,43,47]])}))),O.apply(this,arguments)}},83671:function(n,e,t){t.r(e),t.d(e,{default:function(){return m}});var i=t(7449),a=t(76972),r=t.n(a),s=t(73291),o=t.n(s),l=t(30011),c=t(89184),u=t.n(c),d='{{#.}}\n<div class="list-item" action="open" {{#installed}}data-installed="true"{{/installed}} data-plugin="{{plugin}}">\n  <span \n    class="icon" \n    style="background-image: url({{#icon}}{{icon}}{{/icon}}{{^icon}}./res/puzzle.png{{/icon}});"\n  ></span>\n  <div class="container">\n    <div class="text" style="justify-content: space-between;">\n      <a>{{name}}</a>\n    </div>\n    <small class="value">\n      {{#author}}<span action="open" data-href="https://github.com/{{github}}" class="text link">{{name}}</span>{{/author}}\n    </small>\n  </div>\n</div>\n{{/.}}',p=t(71530),f=t(37519),v=t(64413),g=t(70559),h=t(84734);function m(n){var e="https://raw.githubusercontent.com/deadlyjack/acode-plugins/main/list.json",a=(0,p.Z)(strings.plugins),s=u()("span",{className:"icon search",attr:{action:"search"}}),c={all:[],installed:[]},m="installed";if(a.body=u().parse(l.Z.render("<div class=\"main\" id=\"plugins\">\n   <div class='options'>\n    <span action='select' tabindex='0' value='all' class='active'>All</span>\n    <span action='select' tabindex='0' value='installed'>Installed</span>\n  </div>\n  <div id='plugin-list' class='list scroll' empty-msg=\"{{msg}}\"></div>\n</div>",{msg:"".concat(strings.loading,"...")})),a.header.append(s),actionStack.push({id:"plugins",action:a.hide}),a.onhide=function(){f.Z.hideAd(),actionStack.remove("plugins"),f.Z.removeTitleLoader()},a.onclick=function(n){var e=n.target,i=e.getAttribute("action");"search"!==i?"open"!==i?"select"===i&&(m=e.getAttribute("value"),y()):function(n,e,i){var a=n.plugin,r=n.installed;t.e(414).then(t.bind(t,28538)).then((function(n){(0,n.default)(a,r,e,i)}))}(e.dataset,j,T):(0,v.Z)(a.get("#plugins"))},app.append(a),f.Z.showAd(),n)return a.get(".options").style.display="none",a.settitle(strings.update),void w(n).then(y);function y(){return"all"===m?(null===(n=a.get('[action="select"].active'))||void 0===n||n.classList.remove("active"),null===(e=a.get('[action="select"][value="all"]'))||void 0===e||e.classList.add("active"),void(a.get("#plugin-list").innerHTML=l.Z.render(d,c.all))):"installed"===m?(null===(t=a.get('[action="select"].active'))||void 0===t||t.classList.remove("active"),null===(i=a.get('[action="select"][value="installed"]'))||void 0===i||i.classList.add("active"),void(a.get("#plugin-list").innerHTML=l.Z.render(d,c.installed))):void 0;var n,e,t,i}function Z(){return b.apply(this,arguments)}function b(){return(b=(0,i.Z)(r().mark((function n(){var t;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o()({url:e,method:"GET",responseType:"text",contentType:"application/x-www-form-urlencoded"});case 2:t=n.sent,c.all=f.Z.parseJSON(t)||[],c.installed.length&&c.installed.forEach((function(n){var e=c.all.find((function(e){return e.name===n.name}));e&&(e.installed=!0,e.plugin=n.plugin)}));case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function w(n){return x.apply(this,arguments)}function x(){return x=(0,i.Z)(r().mark((function n(e){var t,i;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,g.Z)(PLUGIN_DIR).lsDir();case 2:return t=n.sent,i=[],t.forEach((function(n){var t=h.Z.basename(n.url);(e&&e.includes(t)||!e)&&i.push((0,g.Z)(h.Z.join(n.url,"plugin.json")).readFile("json"))})),n.next=7,Promise.all(i);case 7:c.installed=n.sent,c.installed.forEach((function(n){n.icon=k(n.id,"icon.png"),n.plugin=k(n.id,"plugin.json")}));case 9:case"end":return n.stop()}}),n)}))),x.apply(this,arguments)}function j(n){var e=c.all.find((function(e){return e.id===n}));e&&(e.installed=!0,c.installed.push(e)),y()}function T(n){var e=c.installed.find((function(e){return e.id===n}));e&&(e.installed=!1,c.installed=c.installed.filter((function(e){return e.id!==n}))),y()}function k(n,e){return h.Z.join(PLUGIN_DIR,n,e)}w().then((function(){y()})),(0,i.Z)(r().mark((function n(){var e;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return f.Z.showTitleLoader(),n.prev=1,n.prev=2,n.next=5,Z();case 5:n.next=9;break;case 7:n.prev=7,n.t0=n.catch(2);case 9:n.next=14;break;case 11:n.prev=11,n.t1=n.catch(1),f.Z.error(n.t1);case 14:return n.prev=14,null===(e=a.get("#plugin-list"))||void 0===e||e.setAttribute("empty-msg","No plugins found"),f.Z.removeTitleLoader(),n.finish(14);case 18:case"end":return n.stop()}}),n,null,[[1,11,14,18],[2,7]])})))()}}}]);