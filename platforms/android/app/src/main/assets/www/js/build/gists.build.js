"use strict";(self.webpackChunkcom_foxdebug_acode=self.webpackChunkcom_foxdebug_acode||[]).push([[235],{91413:function(e,t,n){n.r(t),n.d(t,{default:function(){return Z}});var s=n(8187),a=n.n(s),r=n(53124),i=n(34325),c=n(94735),o=n(73305),l=n(67881),d=n(27409),p=n(50673),g=n(15423),u=function(e){n.e(145).then(n.bind(n,67632)).then((t=>{(0,t.default)(e)}))},m=n(79870),f=n(2802),h=n(65119),v=n(40030),Z=function(e){const t=a()("span",{className:"icon search",attr:{action:"search"}}),n=(0,h.Z)("more_vert","toggle-menu"),s=(0,o.Z)("Gists"),{credentials:Z}=i.Z;let b=null;const y=g.Z.GitHub(),k=y.getUser(),w=cordova.file.externalDataDirectory+".gists",x=(0,l.Z)(r.Z.render("<li action='create'>\r\n  <span class='text'>new gist</span>\r\n  <span class='icon add'></span>\r\n</li>\r\n<li action='reload'>\r\n  <span class='text'>{{reload}}</span>\r\n  <span class='icon refresh'></span>\r\n</li>",strings),{top:"8px",right:"8px",toggle:n,transformOrigin:"top right"});function _(t){const n=s.querySelector("#gists");n&&n.remove(),b=e?e(t):t,b.map((e=>{const t=Object.values(e.files);let n=t.length>0?t[0].filename:e.id;e.private=!e.public,e.name=n,e.files_count=t.length}));const c=a().parse(r.Z.render('<div class="main list" empty-msg="{{msg}}" id="gists">{{#gists}}\r\n  <div class="list-item" action="gist" data-url="{{html_url}}" owner="{{owner.login}}" name="{{name}}" id="{{id}}">\r\n    <span class="octicon main-icon" {{#private}}private{{/private}}></span>\r\n    <div class="container">\r\n      <div class="text">\r\n        <span>{{name}}</span>\r\n      </div>\r\n      <small class="value">\r\n        <div class="group">\r\n          <span class="octicon octicon-file-code"></span>\r\n          <span class="text">{{files_count}}</span>\r\n        </div>\r\n        <div class="group">\r\n          <span class="octicon octicon-comment"></span>\r\n          <span class="text">{{comments}}</span>\r\n        </div>\r\n      </small>\r\n    </div>\r\n    <span class="icon open_in_browser" action="open"></span>\r\n  </div>\r\n  {{/gists}}</div>',{gists:b,msg:strings["empty folder message"]}));c.addEventListener("click",S),s.body=c,s.isConnected||(app.appendChild(s),i.Z.showAd(),actionStack.push({id:"repos",action(){i.Z.hideAd(),s.hide()}}))}function S(e){const t=e.target,n=t.getAttribute("action");switch(["reload","create"].includes(n)&&x.hide(),n){case"gist":!function(){const e=t.id;let n=gistRecord.get(e);n?u(n):(p.Z.loader.create("",strings.loading+"..."),y.getGist(e).read().then((e=>{const t=e.data;n=gistRecord.add(t),u(n)})).catch((e=>{e&&p.Z.alert(strings.error,e.toString())})).finally((()=>{p.Z.loader.destroy()})))}();break;case"open":system.openInBrowser(t.parentElement.getAttribute("data-url"));break;case"reload":E(),gistRecord.reset();break;case"share":break;case"create":!function(){const e={id:parseInt(Math.random()*(new Date).getTime()).toString(16),files:{},public:!1};p.Z.select("",["public","private"],{default:"priavate"}).then((t=>("public"===t&&(e.public=!0),p.Z.prompt(strings["enter file name"],strings["new file"],"text",{match:m.Z.FILE_NAME_REGEX,required:!0})))).then((t=>{const n={filename:t,content:""};e.files[t]=n;const s=gistRecord.add(e,!0);new v.Z(t,{type:"gist",text:n.content,isUnsaved:!1,record:s,render:!0}),actionStack.pop(),actionStack.pop()}))}()}}function E(){p.Z.loader.create("Gists",strings.loading+"..."),k.listGists().then((e=>{const t=e.data,n=Z.encrypt(JSON.stringify(t));d.Z.writeFile(w,n,!0,!1).catch((e=>{toast(strings.error),console.error(e)})),_(t)})).catch((e=>{e.response?(0,c.Z)():console.error(e)})).finally((()=>{p.Z.loader.destroy()}))}x.addEventListener("click",S),s.header.append(t,n),t.onclick=()=>{(0,f.Z)(s.querySelector(".list"))},d.Z.readFile(w).then((e=>{const t=Z.decrypt(i.Z.decodeText(e.data));_(JSON.parse(t))})).catch((e=>{p.Z.loader.create("GitHub",strings.loading+"..."),E()}))}}}]);